(self.modernJsonp=self.modernJsonp||[]).push([["5260"],{977110(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CSSCarouselModule_parentPin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"ItemRep_parentPin"}],type:"Pin",abstractKey:null};i.hash="d1542775568248acbce5a79453f4dffb";let a=i},599016(e,t,n){var i,a;n.r(t),n.d(t,{default:()=>o});let r={argumentDefinitions:[{defaultValue:!0,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"CSSCarouselModule_story",selections:[{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentVisibleItemCount",kind:"LinkedField",name:"contentVisibleItemCount",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mobile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"web",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemWidthHeightRatio",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"objects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[a],storageKey:'images(spec:"236x")'},{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"ItemRep_pin"}],type:"Pin",abstractKey:null}],storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:"storyTitle",args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:[i],storageKey:null},{args:null,kind:"FragmentSpread",name:"ItemRep_story"},{args:null,kind:"FragmentSpread",name:"useCarouselModuleLogic_story"},{args:null,kind:"FragmentSpread",name:"HeaderModule_story"}],type:"Story",abstractKey:null};r.hash="dee347ef77ae345e076b08494d4b664f";let o=r},881541(e,t,n){n.d(t,{A:()=>v});var i,a,r=n(61163),o=n(859471);n(825193);var s=n(19821),l=n(586733),d=n(284387),c=n(535273),u=n(17881),p=n(377917),h=n(78284),m=n(704633),_=n(257361),f=n(971289),g=n(385800),y=n(562615);let x=(void 0!==i||(i=n(977110)).hash&&"d1542775568248acbce5a79453f4dffb"!==i.hash&&console.error("The definition of 'CSSCarouselModule_parentPin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),b=(void 0!==a||(a=n(599016)).hash&&"dee347ef77ae345e076b08494d4b664f"!==a.hash&&console.error("The definition of 'CSSCarouselModule_story' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function v({accessibilityLabelledBy:e,auxData:t,component:n,contentVisibleItemCountOverride:i,disableHeader:a,getProductTagAuxData:v,headerDisplayOptions:w,heading:A,itemRepSiblingNodeFactories:S,items:P,itemWidth:j,itemWidthHeightRatio:k,parentPinKey:I,renderItem:T,saveButtonOptions:C,showBorder:z,showMarkers:E=!1,showNavigationButtons:H=!0,storyKey:F,subtitle:M,surface:D,view:R=3,viewParameter:L,width:O}){(0,o.useEffect)(()=>{(0,r.A)("CSSCarouselModule","/app/packages/StructuredFeed/ModuleReps/CarouselModule/CSSCarouselModule.tsx")},[]);let{logContextEvent:N}=(0,l.o)(),U=(0,f.Ay)(),B=(0,f.bh)(U),W=(0,c.A)(x,I),K=(0,c.A)(b,F),V=K?.objects?[...K.objects]:[],Y=V.map(e=>"Pin"===e.__typename?e.entityId:null),$=(0,o.useMemo)(()=>{let e=K?.storyType?{story_type:K.storyType}:void 0;return e&&t?{...t,...e}:e??t},[K?.storyType,t]),J=B?236:175,q=j??J,G=K.displayOptions?.contentDisplay?.itemWidthHeightRatio??k??1,{web:X,mobile:Q}=K.displayOptions?.contentDisplay?.contentVisibleItemCount??{},Z=i??(B?X:Q),ee=!a&&(K?.storyTitle||A||M),{showModuleBorder:et,showExtraSmallSubtitle:en,headerMarginBottom:ei,isFixedWidthSlides:ea,moduleBorderStyle:er}=(0,m.A)({storyKey:K,styleOverrides:{showModuleBorder:z}}),eo=!ea&&!!Z&&!j,es=eo?"100%":q,el=(0,o.useCallback)(({currentIndex:e,nextIndex:t})=>{if(void 0===e||e===t)return;let i=Number(Y?.[e]);N({aux_data:$,event_type:108,component:n,view_type:R,view_parameter:L,event_data:{pinCarouselSlotEventData:{carouselSlotId:Number.isFinite(i)?i:void 0,carouselSlotIndex:e,toCarouselSlotIndex:t}}})},[$,n,Y,N,R,L]),ed=(0,o.useCallback)(({item:e,index:t})=>{let i=()=>{let i;if(T)return T({item:e,index:t});if(t===V.length-1&&K.action?.text&&K.action?.url&&(i=K.action,i?.text&&i?.url&&h.$$.has(i?.location))){let t="Pin"===e.__typename&&e.images_236x?.url;return t&&(0,y.jsx)(u.A,{auxData:$,buttonText:K.action?.text,component:n,contentIds:K.contentIds??void 0,element:179,imageWidth:es,previewImageSrc:t,storyId:K.storyId??"",storyType:K.storyType,url:K.action.url,view:R,viewParameter:L})}let a="Pin"===e.__typename?v?.(e):void 0;return(0,y.jsx)(p.A,{auxData:{...a,...$},boardKey:null,component:n,imageWidth:es,isInDesktopCarousel:B,isInMobileCarousel:!B,item:null,itemWidthHeightRatio:G,parentPinKey:W,pinKey:"Pin"===e.__typename?e:null,productTagParentPinId:W?.entityId,relatedInterestKey:null,saveButtonOptions:C,slotIndex:t,storyKey:K,surface:D,view:R,viewParameter:L})},a=S?.[t];if(a){let e=i();return(0,y.jsx)(g.e,{children:t=>(0,y.jsx)(s.az,{position:"relative",children:(0,y.jsxs)(o.Fragment,{children:[e,a(t)]})})})}return i()},[V.length,n,v,B,S,es,G,$,W,T,C,K,D,R,L]);return(0,y.jsxs)(s.az,{borderColor:et?"decorative":void 0,borderWidth:et?er:void 0,dangerouslySetInlineStyle:{__style:{"--carousel-item-width":`${q}px`,"--story-item-width-height-ratio":`${1/G}`,...eo&&{"--carousel-item-count":`${Z}`}}},direction:"column",display:"flex",rounding:et?400:void 0,width:O??"100%",children:[ee&&(0,y.jsx)(s.az,{marginStart:6,marginTop:4,children:(0,y.jsx)(_.A,{auxData:$,headerDisplayOptions:w,marginBottomOverride:ei,showExtraSmallSubtitle:en,storyKey:K,view:R,viewParameter:L})}),(0,y.jsx)(s.az,{position:"relative",children:(0,y.jsx)(d.A,{accessibilityLabelledBy:e,items:P??V,mode:"multi",onIndexChange:el,renderItem:ed,showNavigationButtons:H,showScrollMarkers:E})})]})}},458345(e,t,n){n.d(t,{A:()=>p});var i=n(679902),a=n(432321),r=n(427471),o=n(435108),s=n(457315),l=n(81920),d=n(676692),c=n(121066),u=n(399952);let p=function(){let e=(0,a.A)();if(e?.isAuthenticated&&!function(){let e=(0,a.A)(),t=window.location.pathname.startsWith("/settings/notifications"),n=window.location.pathname.startsWith("/reports-and-violations/"),i=window.location.pathname.startsWith("/email/subscription")||window.location.pathname.startsWith("/email/remove")||t,r=window.location.pathname.startsWith("/pin/create/"),o="/pin-builder/"===window.location.pathname&&/url=/.test(window.location.href),{userAgent:s}=e||{userAgent:{isMobile:!1,isTablet:!1}};return s.isMobile||s.isTablet?i||n:r||o||i||n}()){let{viewType:t,viewParameter:n}=(0,d.Cs)()??{},a=(0,c.uy)(window),p=e.experimentsClient.checkExperiment("web_metrics_retry_count").anyEnabled;!function(e,t,n=!1){if(n){let n=0,i=3e4,a=()=>{r.A.create("ActiveUserResource",e).callCreate().catch(r=>{let d,c=r.message;if(c&&"object"==typeof c){"_t_message"in c&&delete c._t_message;try{d=JSON.stringify(c)}catch(e){d="Unable to serialize error message"}}else d=c;(0,l.GV)("webapp.metrics.dau.errors",{sampleRate:1,tags:{message:d,browser:e.data.browser,error_code:(0,s.A)(r,"api_error_code")||"unknown",is_auth:t}}),setTimeout(()=>{i>o.Qv||(i*=2,n+=1,e.data.auxData.event_retry_count=n,a())},i)})};a()}else{let n=r.A.create("ActiveUserResource",e),i=3e4;n.callCreate().catch(a=>{let r,d=a.message;if(d&&"object"==typeof d){"_t_message"in d&&delete d._t_message;try{r=JSON.stringify(d)}catch(e){r="Unable to serialize error message"}}else r=d;(0,l.GV)("webapp.metrics.dau.errors",{sampleRate:1,tags:{message:r,browser:e.data.browser,error_code:(0,s.A)(a,"api_error_code")||"unknown",is_auth:t}}),setTimeout(()=>{i>o.Qv||(i*=2,n.callCreate())},i)})}}({data:{appVersion:(0,u.A)(),auxData:{pwa_type:a&&"unknown"!==a?a:void 0,stage:e.stage??"unknown"},browser:e.userAgent.browserType,clientUUID:(0,i.A)(),event_type:7137,time:1e6*Date.now(),unauth_id:e.unauthId,view_type:t,view_parameter:n}},e.isAuthenticated,p)}}},326550(e,t,n){function i(e){return[0,24,21,26].includes(e)}function a({articleType:e,id:t,title:n}){let i=n.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\’'"]/g,"").trim().replace(/\s+/g,"-");return"today"===e?`/today/shop/${i}/${t}/`:`/discover/article/${i}/${t}/`}n.d(t,{I:()=>i,k:()=>a})},275272(e,t,n){n.d(t,{A:()=>h});var i=n(61163),a=n(859471),r=n(19821),o=n(659182),s=n(201593),l=n(123576);let d="0px 0px 8px rgba(0, 0, 0, 0.1)";var c=n(844255),u=n(535494),p=n(562615);function h({children:e,footerConfig:t,headerConfig:n,height:h,hideOnScroll:m,hideOnScrollState:{isHidden:_,updateHiddenState:f},isFooterHidden:g,noPadding:y,paddingX:x,paddingY:b=3,type:v,zIndex:w,isStoryPin:A}){let S,P;(0,a.useEffect)(()=>{(0,i.A)("FixedContent","/app/packages/layout/FixedContent.tsx")},[]);let{headerLimitedOverflow:j,ignoreObstructions:k,zIndexForGestaltBug:I}=n||{},{appUpsellFooterConfig:T,footerInLego:C,navFooterConfig:z}=t||{},E=!!T,H="header"===v?"top":"bottom",{isDarkMode:F}=(0,s.D2)(),{isRTL:M}=(0,c._8)(),{mWebCloseupRedesignEnabled:D}=(0,o.A)(),R=(0,a.useRef)(null),L=(0,a.useRef)(null);(0,a.useEffect)(()=>{try{if(!k){let e=R.current;L.current=j&&e&&Array.isArray(e.children)?e.children[0]:e,L.current instanceof HTMLElement&&l.A.addObstruction(H,L.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{!k&&L.current instanceof HTMLElement&&l.A.removeObstruction(H,L.current)}},[k,j,H,F]);let O="top"===H?"relative":"fixed",N=y?0:b,U=(h??64)+(n?.overrideTop||0),B=m||z?{transition:C||D?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",..._||g?{transform:`translateY(${"top"===H?-U:U}px)`,opacity:C||D?0:1}:Object.freeze({})}:{},W=2*!("relative"!==O||n?.noGutter),K=W?-W:0,V=F?s.ee:"rgba(255,255,255,.95)";F&&("header"===v?S=-1:P=-1);let Y=C?E?void 0:h??64:"100%",$=n?.isTranslucent&&V||F?V:"var(--sema-color-background-default)",J=n?.isTransparentBackground&&1?"var(--sema-color-background-transparent)":$,q=(0,a.useMemo)(()=>({height:"footer"===v&&D?`calc(${Y} + env(safe-area-inset-bottom))`:Y,...D&&"footer"===v?{paddingBottom:`calc(env(safe-area-inset-bottom) + ${4*(N||0)}px)`}:Object.freeze({})}),[D,Y,v,N]),G=(0,u.A)({skipExpActivation:!0});return(0,p.jsx)(r.az,{ref:R,bottom:"footer"===v,dangerouslySetInlineStyle:{__style:{top:S,bottomStyle:P,...!w||I?{zIndex:I||1}:Object.freeze({}),...j?{background:"transparent",overflow:"hidden",paddingBottom:100,marginBottom:-100,pointerEvents:"none"}:Object.freeze({}),...n?.hasBorder?{borderBottom:"1px solid #efefef"}:Object.freeze({}),...t?.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...B}},"data-test-id":v,display:E?"flex":void 0,height:h&&!C?h:void 0,left:!0,marginEnd:C?"auto":K,marginStart:C?"auto":K,onTransitionEnd:()=>{(m||z)&&L.current&&(_||g?l.A.removeObstruction(H,L.current):l.A.addObstruction(H,L.current))},position:O,right:!0,top:"header"===v,width:C||"fixed"!==O?void 0:"100%",zIndex:I?void 0:w,children:(0,p.jsx)(r.az,{alignItems:t?.alignCenter?"center":void 0,dangerouslySetInlineStyle:{__style:{backgroundColor:J,paddingLeft:M||!G||A?void 0:"8px",paddingRight:M&&G&&!A?"8px":void 0,...q,boxShadow:D&&"footer"===v?`0 10px 0 0 ${J}, ${d}`:C?d:void 0,marginBottom:C&&!z?.docked?16:void 0,...j?{pointerEvents:"auto"}:Object.freeze({}),...n?.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},display:C||t?.alignCenter?"flex":void 0,marginEnd:C?"auto":void 0,marginStart:C?"auto":void 0,paddingX:x||4*("footer"===v&&!y)+W,paddingY:N,position:"relative",rounding:C&&!z?.docked?"pill":void 0,width:z?z.footerWidth:E?void 0:"100%",children:"function"==typeof e?e({updateHiddenState:f}):e})})}},303196(e,t,n){n.r(t),n.d(t,{default:()=>d});var i=n(61163),a=n(859471),r=n(19821),o=n(275272),s=n(292225),l=n(562615);function d({hasBorder:e,headerLimitedOverflow:t,ignoreObstructions:n,isTranslucent:d,isTransparentBackground:c,noGutter:u,overrideTop:p,useRoundedCorners:h,zIndexForGestaltBug:m,isStoryPin:_,...f}){(0,a.useEffect)(()=>{(0,i.A)("FixedHeader","/app/packages/layout/FixedHeader.tsx")},[]);let{noPadding:g,paddingY:y=3,zIndex:x}=f;return(0,l.jsx)(r.ib,{height:t?44+2*(g?0:y)*4:void 0,top:p||0,zIndex:x||void 0,children:(0,l.jsx)(s.A,{hideOnScroll:f.hideOnScroll,children:i=>(0,l.jsx)(o.A,{...f,headerConfig:{isTranslucent:d,isTransparentBackground:c,headerLimitedOverflow:t,hasBorder:e,ignoreObstructions:n,noGutter:u,overrideTop:p,zIndexForGestaltBug:m,useRoundedCorners:h},hideOnScrollState:i,isStoryPin:_,type:"header"})})})}},292225(e,t,n){n.d(t,{A:()=>o});var i=n(859471),a=n(284966);function r(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o extends i.Component{constructor(...e){super(...e),r(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.navFooterConfig?.isDockedNavOnPlp}),r(this,"lastScrollPos",0),r(this,"updateHiddenState",e=>{this.reqAnimationId=window.requestAnimationFrame(()=>{this.setState({isHidden:e})})}),r(this,"handleScroll",(0,a.A)(()=>{let{appUpsellFooterConfig:e,navFooterConfig:t}=this.props,{isHidden:n}=this.state,i=window.scrollY,a=i-this.lastScrollPos,r="none",{scrollHeight:o,clientHeight:s}=document.documentElement||{};Number.isNaN(o)||Number.isNaN(s)||(r=a<0?i<=Math.abs((window.scrollMinY||0)+Math.max(a,20))?"start":"none":i>=(window.scrollMaxY||o-s)-Math.max(a,20)?"end":"none");let l=55*!t?.isModal;e?a>20&&n&&i>=500?e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),t?.onScroll(!1)):(a<-20&&!n||i<=l)&&(this.updateHiddenState(!0),t?.onScroll(!0)):this.props.navFooterConfig?.isDockedNavOnPlp?"start"===r&&!n||i<=l?(this.updateHiddenState(!0),t?.onScroll(!0)):(i>l||"end"===r)&&n&&(this.updateHiddenState(!1),t?.onScroll(!1)):(a<-20||"start"===r)&&n||i<=l?(this.updateHiddenState(!1),t?.onScroll(!1)):(a>20||"end"===r)&&!n&&(this.updateHiddenState(!0),t?.onScroll(!0)),this.lastScrollPos=i},30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.navFooterConfig?.isDockedNavOnPlp&&this.props.navFooterConfig?.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.navFooterConfig?.isDockedNavOnPlp&&!this.props.navFooterConfig?.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){let{children:e,navFooterConfig:t}=this.props,{isHidden:n}=this.state;return e({isHidden:!t?.forceShow&&n,updateHiddenState:this.updateHiddenState})}}},131321(e,t,n){n.d(t,{A:()=>i});function i(e,t){return t in e}},161916(e,t,n){n.d(t,{A:()=>d});var i=n(859471),a=n(106386),r=n(810972),o=n(212244),s=n(120649);let l=(e,t,n)=>e.resources[t]?.[n];function d(e){let{name:t,optionsKey:n}=e??{name:"",optionsKey:""},d=t===o.W,c=(0,s.uN)(),u=c?.get(t,n);if(u)throw u;let p=(0,r.createSelector)(e=>l(e,t,n),e=>e?.data),h=(0,r.createSelector)(e=>l(e,t,n),e=>e?.auxData),m=(0,r.createSelector)(e=>l(e,t,n),e=>e?.error),_=(0,r.createSelector)(e=>l(e,t,n),e=>e?.nextBookmark),f=(0,a.d4)(_),g=(0,a.d4)(p),y=(0,a.d4)(h),x=(0,a.d4)(m),b=(0,i.useRef)({auxData:void 0,data:void 0,error:void 0,isAtEnd:!1,nextBookmark:void 0});if(d)return b.current;let v={auxData:y,data:g,error:x,isAtEnd:"-end-"===f,nextBookmark:f};return(v.auxData!==b.current.auxData||v.data!==b.current.data||v.error!==b.current.error||v.isAtEnd!==b.current.isAtEnd||v.nextBookmark!==b.current.nextBookmark)&&(b.current=v),b.current}},805863(e,t,n){n.d(t,{A:()=>r});var i=n(457315),a=n(752159);function r(){let e=navigator.serviceWorker;return e&&e.getRegistration?((0,a.PM)("mweb_service_worker.unregister_attempt"),e.getRegistration().then(e=>{if(e)return e.unregister().then(()=>((0,a.PM)("mweb_service_worker.unregister_success"),navigator.serviceWorker&&window.caches?window.caches.keys().then(e=>{let t=e.find(e=>e.startsWith("workbox-precaching"));return t?window.caches.delete(t):null}).then(()=>(0,a.PM)("mweb_service_worker.clear_app_shell")):Promise.resolve())).catch(e=>{(0,a.fu)("mweb_service_worker.unregister_fail",{error:(0,i.A)(e,"message")})})})):Promise.resolve()}},733048(e,t,n){n.d(t,{A:()=>i});function i(e){switch(e){case -1:return null;case 0:return"shopping-bag";case 1:return"tag";case 9:return"clock-history";default:return"magnifying-glass"}}},57454(e,t,n){n.d(t,{A:()=>e$});var i=n(61163),a=n(859471),r=n(106386),o=n(979638),s=n(19821),l=n(706114),d=n(458345),c=n(668014),u=n(296221),p=n(358203),h=n(586733),m=n(671996),_=n(678863),f=n(845126),g=n(642883),y=n(201593);let x={borderRadius:"32px 32px 0px 0px",bottom:0,left:0,overflow:"hidden",touchAction:"none",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",zIndex:1,width:"100vw",maxHeight:"100vw",minHeight:"30vh"},b={full:"100vh",default:"50vh",auto:""},v=({size:e,isDarkMode:t})=>(x.height=b[e],x.maxHeight="auto"===e?"90vh":"100vw",x.backgroundColor=t?y.be:"#FFFFFF",x);var w=n(995273),A=n(538329),S=n(911127),P=n(826258),j=n(562615);let k=({content:e,footer:t,header:n})=>{let[i,r]=(0,a.useState)(!1),o=(0,a.useRef)(null),l=(0,a.useCallback)(()=>{let e=o.current;e&&r(e?.clientHeight<e?.scrollHeight&&e.offsetHeight+e.scrollTop<e.scrollHeight)},[]);return(0,a.useEffect)(()=>{l()},[l]),(0,a.useEffect)(()=>(window?.addEventListener("resize",l),()=>{window?.removeEventListener("resize",l)}),[l]),(0,j.jsxs)(a.Fragment,{children:[(0,j.jsxs)(s.az,{ref:o,fit:!0,onScroll:l,overflow:"scroll",padding:0,children:[n,(0,j.jsx)(s.az,{flex:"grow",overflow:"auto",children:e})]}),!!t&&(0,j.jsx)(s.az,{dangerouslySetInlineStyle:i?{__style:{boxShadow:"var(--sema-space-0) var(--sema-space-negative-50) var(--sema-space-200) var(--sema-space-0) rgb(0 0 0 / 0.12)"}}:void 0,fit:!0,position:"relative",children:t})]})};function I({accessibilityModalLabel:e,allowClickAndDrag:t,allowBackgroundScroll:n=!1,children:r,closeOnOutsideClick:o=!0,footer:l,header:d,isOpen:c,mobileIsSlideUp:u,onDismiss:p,zIndex:h,size:m="auto"}){(0,a.useEffect)(()=>{(0,i.A)("SheetMobileWithMediaHeader","/app/packages/experiences/gestalt/SheetMobile/SheetMobileWithMediaHeader.tsx")},[]);let _=(0,A.A)(),f=(0,a.useRef)(null),{setAppFocusState:x}=(0,P.Y)(),[I,T]=(0,a.useState)(!1),{isDarkMode:C}=(0,y.D2)();if((0,a.useEffect)(()=>(c?x(!1):x(!0),()=>{c&&x(!0)}),[x,c]),(0,a.useEffect)(()=>(f.current=(0,g.A)(()=>{f.current&&T(!0)}),()=>{"u">typeof window&&Object.prototype.hasOwnProperty.call(window,"cancelAnimationFrame")&&f.current&&(window.cancelAnimationFrame(f.current),f.current=null)}),[]),(0,a.useEffect)(()=>{let e=c&&!n;return e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="hidden",e.touchAction="none"}})(),()=>{e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="visible",e.touchAction="auto"}})()}},[c,n]),!c)return null;let z=(({isDarkMode:e,size:t})=>{let n=e?y.be:"#FFFFFF";return{__style:{...v({size:t,isDarkMode:e}),backgroundColor:n,transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out"}}})({isDarkMode:C,size:m});z.__style.transform=(()=>{if(u||!(()=>{if("u"<typeof window)return!1;let e=Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth),t=Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight);return e<=380||t<=760})())return"";let e=Math.min(1,(Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth)-12)/380,(Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight)-12)/600);return e=Math.max(.8,e),` scale(${e})`})();let E=(({size:e,isShowing:t,isDarkMode:n})=>{let i=v({size:e,isDarkMode:n});return i.transition="all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",i.transform=t?"translateY(0)":`translateY(${b[e]||"100vh"})`,{__style:i}})({size:m,isShowing:I,isDarkMode:C});return(0,j.jsx)(S.A,{allowClickAndDrag:t,children:(0,j.jsx)(s.Wd,{children:(0,j.jsxs)(s.az,{"aria-label":e,display:"inlineBlock",height:"100%",position:"relative",role:"dialog",zIndex:h||w.QN,children:[(0,j.jsx)(s.Rp,{accessibilityLabel:_.bt("Mobile sheet mask", "Mobile Sheet Mask", "mweb.sheet_mobile.mask", undefined, true),onTap:()=>{o&&p()},tapStyle:"none",children:(0,j.jsx)(s.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",touchAction:"none",transitionProperty:"opacity",transitionTimingFunction:"ease-out"}},height:"100%",left:!0,position:"fixed",top:!0,width:"100%",zIndex:new s.rk(1)})}),(0,j.jsx)(s.az,{color:"default",dangerouslySetInlineStyle:u?E:z,position:"fixed",children:(0,j.jsx)(s.az,{direction:"column",display:"flex",justifyContent:"between",maxHeight:E.__style?.maxHeight||"100vh",position:"relative",width:"100%",children:(0,j.jsx)(k,{content:r,footer:l,header:d})})})]})})})}var T=n(81920);let C=({display_data:e,complete:t,dismiss:n,context_aux_data:i})=>{let r=(0,A.A)(),{logContextEvent:o}=(0,h.o)(),[l,d]=(0,a.useState)(!0),[c,u]=(0,a.useState)(0),p=()=>{d(!1),n()},g=(0,a.useCallback)((e,t)=>{o({event_type:e,component:15489,element:t,aux_data:{experience_id:i.experience_id,placement_id:i.placement_id,step_number:c+1,step_index:c}})},[i.experience_id,i.placement_id,c,o]);if((0,a.useEffect)(()=>{g(13,18257)},[c,g]),!l)return null;if(!(e.steps&&e.steps.length>0&&e.steps.every(e=>e.title&&e.subtitle&&e.primary_button&&e.image)))return(0,T.GV)(m.pv,{sampleRate:1,tags:{experience_id:i.experience_id,placement_id:i.placement_id,reason:"Required display data not present",platform:4}}),null;let y=e.steps[c];if(!y)return(0,T.GV)(m.pv,{sampleRate:1,tags:{experience_id:i.experience_id,placement_id:i.placement_id,reason:`No step for index ${c}`,platform:4}}),null;let x=window?.innerWidth||375,b=(0,j.jsxs)(a.Fragment,{children:[(0,j.jsx)(s.ib,{top:0,children:(0,j.jsx)(s.az,{padding:3,position:"absolute",width:"100%",children:(0,j.jsx)(s.K0,{accessibilityLabel:r.bt("Dismiss", "Dismiss", "experiences.ExperienceModalWindow.modalDismissIconButton", undefined, true),bgColor:"washLight",icon:"close",iconColor:"default",onClick:()=>{g(123,75),p()},size:"lg"})})}),(0,j.jsx)(s.iX,{contentAspectRatio:.8,height:1.25*x,width:x,children:(0,j.jsx)(s._V,{alt:y.image.image_alt,color:y.image.dominant_color||void 0,fit:"cover",naturalHeight:y.image.height,naturalWidth:y.image.width,src:y.image.url})})]}),v=(0,j.jsxs)(s.az,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",paddingX:2,paddingY:3,children:[y.secondary_button&&(0,j.jsx)(_.A,{buttonType:"secondary",data:(0,f.q)(y.secondary_button,()=>{g(102,13005),p()}),experienceSchema:2}),(0,j.jsx)(_.A,{buttonType:"primary",data:(0,f.q)(y.primary_button,()=>{c<e.steps.length-1?(g(102,13004),u(c+1)):t()}),experienceSchema:2})]});return(0,j.jsx)(I,{accessibilityModalLabel:r.bt("Multi-step modal", "Multi Step Modal", "experiences.ExperienceMultiStepModal.accessibilityModalLabel", undefined, true),allowClickAndDrag:!1,footer:v,header:b,isOpen:l,mobileIsSlideUp:!0,onDismiss:()=>{g(123,16412),p()},size:"auto",children:(0,j.jsxs)(s.az,{padding:3,children:[(0,j.jsx)(s.az,{marginBottom:3,children:(0,j.jsx)(s._Y,{size:"500",children:y.title})}),(0,j.jsx)(s.KJ,{children:y.subtitle})]})})};function z({experience:e}){return(0,a.useEffect)(()=>{(0,i.A)("ExperienceMultiStepModal","/app/packages/experiences/Experiences/ExperienceMultiStepModal/ExperienceMultiStepModal.tsx")},[]),(0,j.jsx)(u.Je,{eligibleSchemas:[2],eligibleTypes:[26],experience:e,children:({complete:t,dismiss:n,experience:{display_data:i}})=>(0,j.jsx)(C,{complete:t,context_aux_data:{experience_id:e?.experience_id,placement_id:e?.placement_id},dismiss:n,display_data:i})})}var E=n(171768),H=n(777275),F=n(567176),M=n(693154),D=n(303196),R=n(214429),L=n(41206),O=n(601185),N=n(844255),U=n(430705),B=n(618243),W=n(328582),K=n(998556),V=n(319571),Y=n(706466),$=n(803489),J=n(971289),q=n(720575),G=n(807782),X=n(825179),Q=n(439524),Z=n(694804);n(487688);var ee=n(743372),et=n(168079),en=n(328673);let ei={__style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}};function ea({currentTabIndex:e,tabBoards:t}){(0,a.useEffect)(()=>{(0,i.A)("MoreIdeasTabs","/app/www/Homefeed/MoreIdeasTabs.tsx")},[]);let n=(0,a.useRef)(null),l=(0,a.useRef)(!1),d=(0,a.useRef)([]),c=(0,o.Zp)(),u=(0,A.A)(),p=(0,ee.A)(),h=(0,r.wA)(),m=t.length?[{href:"/",text:(0,j.jsx)(s.az,{children:u.bt("All", "All", "homefeed.moreIdeasTab.homefeedTab", undefined, true)}),tabType:1},...t.filter(e=>e).map(({id:e,name:t},n)=>({href:`/?boardId=${String(e)}`,text:(0,j.jsx)(s.az,{dangerouslySetInlineStyle:ei,maxWidth:100,overflow:"hidden",children:t}),boardId:e,tabType:2,ref:d.current[n]}))]:null;if((0,et.A)(()=>{d.current=Array(t.length).fill(void 0).map((e,t)=>d.current[t]||(0,a.createRef)())}),(0,a.useEffect)(()=>()=>{l.current&&(window.cancelAnimationFrame(l.current),l.current=null)}),!m)return null;let _=m.map(e=>({href:e.href,text:e.text,ref:e.ref}));return(0,j.jsx)(s.az,{ref:n,"data-test-id":"more-ideas-tabs",fit:!0,marginBottom:1,marginTop:1,overflow:"scrollX",children:(0,j.jsx)(s.tU,{activeTabIndex:e,onChange:({activeTabIndex:e})=>{let n=m?.[e];if(n){let i;i=n.boardId,h((0,en.Y)(i,e));let a=1===n.tabType?u.bt("All", "All", "homefeed.moreIdeasTab.homefeedTab", undefined, true):t.find(e=>e.id===n.boardId)?.name;p({event_type:101,view_type:1,view_parameter:92,component:13184,element:1===n.tabType?11081:11082,aux_data:{index:e.toString(),board_id:n.boardId,referrer:19,tab_title:a},object_id_str:n.boardId})}let{pathname:i,state:a}=m?{pathname:(m[e]||m[0]).href,state:(m[e]||m[0]).locationState||void 0}:{};c(i,{state:a})},tabs:_})})}var er=n(765346),eo=n(273919),es=n(863265),el=n(593936),ed=n(242978),ec=n(284247),eu=n(996209),ep=n(809756),eh=n(499053),em=n(699613);let e_=new s.rk(100);function ef({pinUrl:e,inviter:t}){(0,a.useEffect)(()=>{(0,i.A)("NuxSharedPinBanner","/app/www/pages/duplo/NuxSharedPinBanner.tsx")},[]);let n=(0,A.A)(),o=(0,em.HR)(),[l,d]=(0,a.useState)(!0),c=(0,r.wA)(),u=()=>c((0,eh.A)(null,null)),p=(0,eu.A)(e),{data:h}=(0,U.A)({name:"PinResource",options:{id:p,field_set_key:"detailed",is_mobile_fork:!0}}),m=p?o(p):null,_=h??m,f=_?.image_medium_url??_?.image_large_url,g=t.first_name??t.full_name??t.username??"",y=(0,ec.A)(n.bt("Tell {{ name }} what you think", "Tell {{ name }} what you think", "HomePage.SharedPinBannerTitle", undefined, true),{name:g}),{navFooterHeight:x}=(0,ep.o)();return p&&_&&g&&f&&l?(0,j.jsx)(s.az,{marginBottom:2,marginTop:2,paddingX:2,children:(0,j.jsx)(s.vF,{message:n.bt("See what inspired them and reply with your thoughts", "See what inspired them and reply with your thoughts", "HomePage.SharedPinBanner.Subtext", undefined, true),offset:{bottom:x+8,top:0},onDismiss:()=>{u(),d(!1)},primaryAction:{href:e+"&hide_app_upsell=true",label:n.bt("See Pin", "See Pin", "HomePage.SharedPinToastAction", undefined, true),accessibilityLabel:n.bt("See shared Pin", "See shared Pin", "HomePage.SharedPinToastAction.accessibilityLabel", undefined, true),onClick:u,role:"link"},secondaryAction:{accessibilityLabel:n.bt("Later", "Later", "HomePage.SharedPinBannerSecondary.accessibilityLabel", undefined, true),label:n.bt("Later", "Later", "HomePage.SharedPinBannerSecondary", undefined, true),onClick:()=>{u(),d(!1)},role:"button"},thumbnail:{image:(0,j.jsx)(s._V,{alt:"Shared Pin",color:"transparent",fit:"cover",naturalHeight:40,naturalWidth:40,src:f})},title:y,zIndex:e_})}):null}function eg(){(0,a.useEffect)(()=>{(0,i.A)("PreferencesUpdatedBanner","/app/www/pages/duplo/PreferencesUpdatedBanner.tsx")},[]);let{shouldRefreshHomefeed:e,clearRefreshFlag:t}=(0,el.d)(),{showToast:n}=(0,Y.CG)(),r=(0,A.A)(),o=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{if(e&&!o.current){o.current=!0;let e=r.bt("Preferences updated! We're refreshing your feed now.", "Preferences updated! We're refreshing your feed now.", "PreferencesUpdatedBanner.message", undefined, true);n(({hideToast:n})=>(0,j.jsx)(F.A,{duration:3e3,onHide:()=>{n(),t(),o.current=!1},text:e}))}else e||(o.current=!1)},[e,t,n,r]),null}var ey=n(623987),ex=n(408738);function eb(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let ev=(0,ex.A)(()=>n.e("82269").then(n.bind(n,922453)),void 0,e=>922453,"app-www-pages-duplo-CoreActionsHeader",e=>["82269"]),ew=(0,ex.A)(()=>n.e("65469").then(n.bind(n,497826)),void 0,e=>497826,"app-www-stories-FullWidthPinStory",e=>["65469"]),eA=(0,ex.A)(()=>n.e("11757").then(n.bind(n,50812)),{ssr:!1},e=>50812,void 0,void 0),eS=(0,ex.A)(()=>n.e("30764").then(n.bind(n,907748)),void 0,e=>907748,"app-www-Homefeed-HomefeedMoreIdeasTabContent",e=>["30764"]),eP=(0,ex.A)(()=>n.e("45231").then(n.bind(n,827279)),void 0,e=>827279,"app-www-stories-LandingPageStory-LandingPageStory",e=>["45231"]),ej=(0,ex.A)(()=>Promise.all([n.e("18324"),n.e("46782"),n.e("49412")]).then(n.bind(n,945101)),{ssr:!1},e=>945101,void 0,void 0),ek=(0,ex.A)(()=>Promise.all([n.e("43744"),n.e("99233")]).then(n.bind(n,308344)),{ssr:!1},e=>308344,void 0,void 0),eI=(0,ex.A)(()=>n.e("93920").then(n.bind(n,626531)),{ssr:!1},e=>626531,void 0,void 0),eT=(0,ex.A)(()=>Promise.all([n.e("91796"),n.e("28081")]).then(n.bind(n,668008)),{ssr:!1},e=>668008,void 0,void 0),eC=(0,a.lazy)(()=>n.e("98325").then(n.bind(n,757876))),ez=(0,a.lazy)(()=>n.e("72022").then(n.bind(n,21589))),eE=(0,a.lazy)(()=>n.e("39634").then(n.bind(n,92041))),eH=(0,a.lazy)(()=>n.e("41334").then(n.bind(n,64469))),eF=(0,a.lazy)(()=>n.e("9106").then(n.bind(n,286441))),eM=(0,a.lazy)(()=>n.e("99062").then(n.bind(n,562773))),eD={feedKey:ed.bg,trafficSource:ed.mA,resourceName:ed.jC,feedItemProps:e=>({viewParameter:92,viewType:1,onFeedItemClick:()=>{e.onFeedItemClick&&e.onFeedItemClick()}}),pullToRefresh:!0},eR={first_page_size:"25",page_size:"10"},eL=({webMobileHomeFeedTakoverExperience:e})=>{let{feedKey:t,feedItemProps:n,pullToRefresh:i}=eD,a=(0,o.zy)(),d=(0,o.Zp)(),c=(0,r.d4)(({session:e})=>e.firstHomeFeedRequestAfterNux),u={webMobileHomeFeedTakoverExperience:e,location:a,navigate:d},p=(0,r.d4)(({feeds:e})=>e[t]??[]),{selectedUseCases:h,selectedPins:m}=(0,es.p)(),_=(0,er.xx)(h,m),f=!c,g=_.length>0?{in_nux:c,nux_signals_map:_}:{in_nux:c},y={...ed.Vf,...f?{...eR}:{...g},in_local_navigation:!0,static_feed:!!(a&&(a.pathname.includes("pwt_performance_testing")||void 0!==(0,$.A)(a.search).pwt_performance_testing))},x=(0,U.A)({name:ed.jC,options:y}),{isAtEnd:b,isFetching:v,fetchMore:w,data:A,refresh:S}=x,P={includeBackgroundImages:!0,includeVideos:!0,pins:Object.values((0,em.zy)())};c&&(0,T.GV)("home_product.homefeed.has_in_nux_flag",{sampleRate:.1,tags:{appType:"mweb"}});let k=(()=>{let{isGraphQLEnabledInGeneral:e}=(0,G.aR)(),{locale:t}=(0,N._8)(),n=(0,em.zy)();return({feedItems:i,prevFeedItems:a,finishedRefresh:r,unauthLandingPinStateForAuthHomefeed:{pinId:o,feedItem:s}})=>{if(!i.length)return null;if(r&&a.length>0){let e=(e,t)=>e.slice(0,t).map(e=>e.id),n=e(a,5),r=e(i,5),o={appType:"mweb",language:t&&t.slice(0,2)||"unknown",locale:t||"unknown"};(0,T.GV)("home_product.homefeed.refresh",{sampleRate:1,tags:o}),JSON.stringify(n)===JSON.stringify(r)&&(0,T.GV)("home_product.homefeed.refresh.no_change",{sampleRate:1,tags:o})}if(o&&!e){if(a.length>0&&a[0]!==i[0])return(0,K.y1)().removeItem(l.sH),{feedItem:null,pinId:null};else if((0===a.length||a[0]===i[0]&&a.length!==i.length||!s)&&n[o]&&!i.slice(0,5).some(({id:e})=>e===o))return{feedItem:{id:o,type:"pin",trackingParams:i[0].trackingParams},pinId:o}}return null}})(),I=A?.length?A[0]:null;if(e&&e.display_data?.in_checklist_education&&e.display_data?.num_columns_requested===2){let e={type:"fullWidthBreakIn",value:{index:0,content:I?.id&&(0,j.jsx)(ey.A,{storyId:I.id,children:e=>(0,j.jsx)(ew,{slotIndex:0,story:e,viewParameter:3833,viewType:604})})}},a=p.slice(1);return(0,j.jsx)(s.az,{"data-test-id":"homefeed",children:(0,j.jsx)(X.RM,{authHomefeedComponentDidUpdate:k,feedItemProps:n&&n(u),feedItems:a,feedItemsAdjustment:e,feedKey:t,pagination:{hasNext:!b,isLoadingNext:v,loadNext:()=>w(),refetch:()=>S()},pullToRefresh:i,trafficSource:ed.mA,visuallyCompleteProfilerOptions:P})})}return f&&!e?.display_data?(0,j.jsx)(s.az,{"data-test-id":"homefeed-ssr",children:(0,j.jsx)(X.Ir,{authHomefeedComponentDidUpdate:k,feedItemProps:n&&n(u),feedKey:ed.bg,pullToRefresh:i,resource:x,serverRender:!0,trafficSource:ed.mA,visuallyCompleteProfilerOptions:P})}):(0,j.jsx)(s.az,{"data-test-id":"homefeed",children:(0,j.jsx)(X.Ir,{authHomefeedComponentDidUpdate:k,feedItemProps:n&&n(u),feedKey:t,pullToRefresh:i,resource:x,trafficSource:ed.mA,visuallyCompleteProfilerOptions:P})})},eO=(0,ex.A)(()=>n.e("79716").then(n.bind(n,785327)),{ssr:!1},e=>785327,void 0,void 0),eN=(0,ex.A)(()=>n.e("83602").then(n.bind(n,413609)),{ssr:!1},e=>413609,void 0,void 0),eU=(0,ex.A)(()=>n.e("42948").then(n.bind(n,830255)),{ssr:!1},e=>830255,void 0,void 0),eB=(0,ex.A)(()=>n.e("78449").then(n.bind(n,153096)),{ssr:!1},e=>153096,void 0,void 0),eW=(0,ex.A)(()=>n.e("13099").then(n.bind(n,411206)),{ssr:!1},e=>411206,void 0,void 0),eK=(0,ex.A)(()=>n.e("78416").then(n.bind(n,256403)),{ssr:!1},e=>256403,void 0,void 0);class eV extends a.PureComponent{constructor(...e){super(...e),eb(this,"state",{...(0,er.of)(),currentTabIndex:"number"==typeof this.props.selectedTabIndex?this.props.selectedTabIndex:0,showUnlinkTokenExpiredModal:!1,showDeleteAccountSurveyModal:!1,showYipModal:!1,shouldDismissCoreActionsHeader:!1,showQRAppErrorBanner:!1}),eb(this,"renderOptInInterestPicker",()=>{let{everythingFeedExperience:e,isLimitedLogin:t}=this.props,{extraPlpImages:n,extraBlpImages:i}=this.state,a=!t&&e&&504192===e.experience_id,r=a&&e&&e.display_data&&e.display_data.full_screen_modal;return e&&a?(0,j.jsx)(c.A,{name:"SafeSuspense_HomePage_OptInInterestPicker",children:r?(0,j.jsx)(eK,{experience:e,extraImageInfo:n.length>0?n:i,viewParameter:92,viewType:1}):(0,j.jsx)(eB,{experience:e,viewParameter:92,viewType:1})}):null})}static getDerivedStateFromProps(e){let{selectedTabIndex:t,navigate:n,location:i}=e;return(0,$.A)(i.search).show_qr_app_error?(n("/",{replace:!0}),{showQRAppErrorBanner:!0}):"number"==typeof t?{currentTabIndex:t}:null}componentDidMount(){let{dispatchViewedSharedPins:e,location:t,i18n:n,showToast:i,navigate:a}=this.props,{sharedPinData:r}=this.state;(0,eo.h)(!1),(0,d.A)(),r&&Object.keys(r).length>0&&e(r),t.state?.unlinkTokenInvalid&&this.setState({showUnlinkTokenExpiredModal:!0}),t.state?.isCloseAccountReasonOpen&&this.setState({showDeleteAccountSurveyModal:!0}),t.state?.showError&&i(({hideToast:e})=>(0,j.jsx)(F.A,{duration:5e3,onHide:e,text:n.bt("We can’t find that idea. Try searching for one just like it.", "We can’t find that idea! Try searching for one just like it.", " - ", undefined, true),type:"error"})),(0,$.A)(t.search).show_yip_modal&&(a("/",{replace:!0}),this.setState({showYipModal:!0})),this.props.shouldRefreshHomefeed&&(0,Q.Y9)("homefeed")}render(){let{checkExperiment:e,currentUserId:t,currentUsername:n,everythingFeedExperience:i,navigate:r,i18n:o,isAuthenticated:l,isEligibleForCoreActionsHeader:d,isPartner:h,location:m,moreIdeasStory:_,newUserWelcomeStoryExperience:f,webMobileHomeFeedTakoverExperience:g,selectedTabBoardId:y,tabBoards:x,shouldRefreshHomefeed:b}=this.props,{currentTabIndex:v,showUnlinkTokenExpiredModal:w,showDeleteAccountSurveyModal:A,showYipModal:S,shouldDismissCoreActionsHeader:P,showQRAppErrorBanner:k}=this.state,I=(0,$.A)(m.search),T=I&&I.boardId||y;if(i&&!k)switch(i.experience_id){case 40002:case 10105:return(0,j.jsx)(c.A,{name:"SafeSuspense_HomePage_Nux",children:(0,j.jsx)(B.A,{fallback:(0,j.jsx)(W.A,{accessibilityLabel:this.props.i18n.bt("Loading new user education", "Loading new user education", "Loading spinner", undefined, true)}),children:h?(0,j.jsx)(eU,{experience:i}):(0,j.jsx)(eN,{experience:i})})});case 500681:return(0,j.jsx)(c.A,{name:"SafeSuspense_HomePage_ContactUpdate",children:(0,j.jsx)(eO,{fallback:(0,j.jsx)(W.A,{accessibilityLabel:this.props.i18n.bt("Loading experience", "Loading experience", "loading experience spinner", undefined, true)})})})}let C=l&&e("mweb_hf_core_actions_header").anyEnabled&&d,F=()=>{this.setState({shouldDismissCoreActionsHeader:!0})};return(0,j.jsx)(q.A,{viewParameter:92,viewType:1,children:(0,j.jsx)(V.A,{view:1,viewParameter:92,children:(0,j.jsxs)(R.default,{dataLayoutShiftBoundaryId:"AuthHomePageContainer",hasFixedHeader:!0,children:[k&&(0,j.jsx)(s.az,{marginTop:4,children:(0,j.jsx)(eM,{})}),this.props.checkExperiment("ce_mweb_nux_shared_pin_banner").anyEnabled&&this.props.sessionSharedPinLandingInfo?.url&&this.props.sessionSharedPinLandingInfo?.inviter?(0,j.jsx)(ef,{inviter:this.props.sessionSharedPinLandingInfo.inviter,pinUrl:this.props.sessionSharedPinLandingInfo.url}):null,(0,j.jsx)(Z.A,{text:o.bt("Home", "Home", "HomePage.HiddenAccessibilityHeader", undefined, true)}),!!x?.length&&(0,j.jsx)(D.default,{hideOnScroll:l,noPadding:!0,overrideTop:0,children:(0,j.jsx)(s.az,{paddingY:1,children:(0,j.jsx)(ea,{currentTabIndex:v,tabBoards:x||[]})})}),_&&(0,j.jsx)(s.az,{marginEnd:-4,marginStart:-4,paddingY:2,children:(0,j.jsx)(ey.A,{storyId:_.id||"",children:e=>(0,j.jsx)(ew,{slotIndex:0,story:e,viewParameter:92,viewType:1},_.id)})}),0!==v&&T&&v<=(x?.length??0)&&(0,j.jsx)(eS,{boardId:T})||(0,j.jsxs)(a.Fragment,{children:[(0,j.jsx)(z,{experience:i}),(0,j.jsx)(u.Vj,{experience:i,placementId:40001}),(0,j.jsx)(u.nU,{placementId:40001}),(0,j.jsx)(u.aR,{experience:i,placementId:40001}),(0,j.jsx)(p.A,{placementId:i?.placement_id}),(0,j.jsx)(H.A,{placementId:1000544}),(0,j.jsx)(E.A,{placementId:1000558}),(0,j.jsx)(u.Je,{eligibleIds:[500726,500866,500735,500833,501182,501275,501385,501358,501908,501909,503291],experience:i,children:(0,j.jsx)(B.A,{children:(0,j.jsx)(ez,{experience:i})})}),i&&(0,j.jsx)(u.Je,{eligibleIds:[507483],experience:i,children:({dismiss:e,experience:{display_data:t}})=>{let n=!("is_blocking"in t)||t.is_blocking;return(0,j.jsx)(ej,{container:"HomePage",dismiss:e,isBlockingModal:n})}}),i&&(0,j.jsx)(u.Je,{eligibleIds:[507661],experience:i,children:({dismiss:e,experience:{display_data:t}})=>(0,j.jsx)(ek,{container:"HomePage",displayData:t,onDismiss:e})}),i&&(0,j.jsx)(u.Je,{eligibleIds:[507924],experience:i,children:({complete:e,dismiss:t})=>(0,j.jsx)(eI,{onComplete:e,onDismiss:t})}),i&&(0,j.jsx)(u.Je,{eligibleIds:[508387],experience:i,placementId:40001,children:({complete:e,dismiss:t,experience:n})=>(0,j.jsx)(eT,{complete:e,dismiss:t,experience:n})}),i&&(0,j.jsx)(u.Je,{eligibleIds:[505326],experience:i,children:({complete:e,dismiss:t})=>(0,j.jsx)(a.Suspense,{children:(0,j.jsx)(eF,{complete:e,dismiss:t})})}),i&&(0,j.jsx)(u.Je,{eligibleIds:[505801],experience:i,children:({complete:e})=>(0,j.jsx)(a.Suspense,{children:(0,j.jsx)(eH,{complete:e})})}),f?.display_data?.story&&f.display_data.showUpdatedLandingPageStory&&(0,j.jsx)(eP,{isMoreIdeasTabsVisible:!!x?.length,newUserWelcomeStoryExperience:f}),(0,j.jsxs)(s.az,{marginTop:2*(!x?.length&&!_),children:[!P&&C&&(0,j.jsx)(ev,{onDismiss:F,username:n||""}),(0,j.jsx)(eL,{webMobileHomeFeedTakoverExperience:g})]})]}),w&&(0,j.jsx)(B.A,{children:(0,j.jsx)(s.az,{"data-test-id":"unlink-expired-token",children:(0,j.jsx)(eE,{onDismiss:()=>{r("/",{replace:!0}),this.setState({showUnlinkTokenExpiredModal:!1})}})})}),A&&(0,j.jsx)(B.A,{children:(0,j.jsx)(eC,{isPartner:h,onDismiss:()=>{r("/",{replace:!0}),this.setState({showDeleteAccountSurveyModal:!1})},userId:t,username:n})}),S&&(0,j.jsx)(c.A,{name:"YearInPreviewConfirmPublishModal",children:(0,j.jsx)(eW,{onModalDismiss:()=>{this.setState({showYipModal:!1})}})}),this.renderOptInInterestPicker(),0===v&&i&&(0,j.jsx)(u.Je,{eligibleIds:[508418],experience:i,children:()=>b?(0,j.jsx)(eg,{}):(0,j.jsx)(eA,{hasTabBoards:(x?.length??0)>0})})]})})})}}let eY=[];function e$(){(0,a.useEffect)(()=>{(0,i.A)("HomePage","/app/www/pages/duplo/HomePage.tsx")},[]);let e=(0,A.A)(),t=(0,r.wA)(),n=(0,M.A)(),{showToast:s}=(0,Y.CG)(),l=(0,o.Zp)(),d=(0,o.zy)(),{checkExperiment:c}=(0,O.A)(),{shouldRefreshHomefeed:p,clearRefreshFlag:h}=(0,el.d)(),{experience:m}=(0,u.Rf)(40001),{experience:_}=(0,u.Rf)(1000115),{experience:f}=(0,u.Rf)(1000411),g=(0,r.d4)(({feeds:e})=>e.homefeed),y=(0,r.d4)(({homefeedTabUI:e})=>e.activeTabBoardId),x=(0,r.d4)(({homefeedTabUI:e})=>e.activeTabIndex),{isAuth:b,isLimitedLogin:v}=n,w=(0,r.d4)(({session:e})=>e.firstHomeFeedRequestAfterNux),S=(0,r.d4)(({session:e})=>e.sharedPinLandingInfo??null),P=n.isAuth?n.id:void 0,k=n.isAuth?n.username:void 0,I=!!n.isAuth&&n.isPartner,T=(0,J.qJ)(),C=Array.isArray(g)?g:[],z=!T&&C[0]&&"story"===C[0].type?C[0]:null,E=(0,r.d4)(({stories:e})=>z?e[z.id]:null),H=E&&E.story_type&&E.story_type.startsWith("boards_more_ideas_feed_upsell")?E:null,F=C.find(({type:e})=>"home_feed_tabs"===e)?.tabs,{data:D}=(0,U.A)(b&&c("mweb_hf_core_actions_header",{dangerouslySkipActivation:!0}).anyEnabled?{name:"UserResource",options:{user_id:n.id,field_set_key:"core_actions_header"}}:null),R=(0,J.M)();(0,L.A)(d,s,e);let N={checkExperiment:c,currentUserId:P,currentUsername:k,dispatchViewedSharedPins:e=>t({type:"SET_VIEWED_SHARED_PINS",payload:{pins:e}}),everythingFeedExperience:m,navigate:l,i18n:e,isAuthenticated:b,isEligibleForCoreActionsHeader:D?.is_eligible_for_core_actions_header,isLimitedLogin:v,isMobile:R,isPartner:I,location:d,moreIdeasStory:H,newUserWelcomeStoryExperience:f,selectedTabBoardId:y,selectedTabIndex:x,showToast:s,tabBoards:F??eY,webMobileHomeFeedTakoverExperience:_,shouldRefreshHomefeed:p,clearRefreshFlag:h,inNux:w,sessionSharedPinLandingInfo:S};return(0,j.jsx)(eV,{...N})}},242978(e,t,n){n.d(t,{Vf:()=>s,bg:()=>a,jC:()=>o,ks:()=>l,mA:()=>r});var i=n(788332);let a="homefeed",r="feed_home",o="UserHomefeedResource",s={field_set_key:"mobile_grid_item",prepend:!1},l=(0,i.A)(s)},328673(e,t,n){n.d(t,{Y:()=>i});let i=(e,t)=>({type:"SET_ACTIVE_HOMEFEED_TAB",payload:{boardId:e,index:t}})},499053(e,t,n){n.d(t,{A:()=>i});function i(e,t){return{type:"SET_SHARED_PIN_LANDING_INFO",payload:{url:e,inviter:t}}}},987093(e,t,n){n.d(t,{AD:()=>f,X2:()=>h,e6:()=>u,sN:()=>p,x2:()=>m});var i=n(427471),a=n(586733),r=n(257300),o=n(974694);function s(e,t,n,a){return i.A.create("UserFollowResource",{user_id:e,invite_code:a||void 0,aux_data:t?{pin_id:t}:void 0,client_tracking_params:n,disable_event_log_info:!0})}let l=e=>e??(0,a.o)().logContextEvent,d=(e,t,n,i)=>{let a=t().session?.userId;e((0,o.pV)(n,i)),a&&e((0,o.yX)(a,i))},c=(e,t,n,i)=>{d(e,t,n,!i)};function u(e,t=null,n,i,a){return(r,o)=>{d(r,o,e,!0),s(e,t,n,i).callCreate().then(()=>{l(a)({event_type:45,object_id_str:e,aux_data:t?{pin_id:t}:void 0,clientTrackingParams:n??void 0})}).catch(()=>{c(r,o,e,!0)})}}function p(e,t=null,n,i,a){return async(r,o)=>{d(r,o,e,!0);try{await s(e,t,n,i).callCreate(),l(a)({event_type:45,object_id_str:e,aux_data:t?{pin_id:t}:void 0,clientTrackingParams:n??void 0})}catch(t){throw c(r,o,e,!0),t}}}function h(e,t=null,n,i){return(a,r)=>{d(a,r,e,!1),s(e,t,n).callDelete().then(()=>{l(i)({event_type:46,object_id_str:e,aux_data:t?{pin_id:t}:void 0,clientTrackingParams:n??void 0})}).catch(()=>{c(a,r,e,!1)})}}function m(e,t=null,n,i){return async(a,r)=>{d(a,r,e,!1);try{await s(e,t,n).callDelete(),l(i)({event_type:46,object_id_str:e,aux_data:t?{pin_id:t}:void 0,clientTrackingParams:n??void 0})}catch(t){throw c(a,r,e,!1),t}}}let _=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),f=e=>t=>{e.length>0&&((0,r.A)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e}}).catch(()=>t(_(e,!1))),t(_(e,!0)))}},974694(e,t,n){n.d(t,{Bt:()=>c,Fq:()=>p,LR:()=>r,Wi:()=>h,oH:()=>u,om:()=>d,pV:()=>o,yX:()=>s});var i=n(257300),a=n(805863);function r(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}let o=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),s=(e,t)=>({type:"USER_FOLLOWING_COUNT",payload:{id:e,following:t}}),l=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),d=({id:e,orbacSubjectId:t,blockSource:n,blockContext:a,logContextEvent:r})=>async o=>{o(l(e,!0));let s=await (0,i.A)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"PUT",data:{orbac_subject_id:t,block_source:n,block_context:a}}).catch(()=>o(l(e,!1)));return r({event_type:54,object_id_str:e}),s},c=(e,t)=>async n=>{n(l(e,!1));let a=await (0,i.A)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"DELETE"}).catch(()=>n(l(e,!0)));return t({event_type:55,object_id_str:e}),a};function u(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}let p=(e,t)=>()=>(0,i.A)({url:"/v3/users/state/{state}/",urlParams:{state:e},method:"PUT",data:{value:t}}),h=(e,t,n)=>(r,o)=>{(0,i.A)({url:"/v3/users/me/",method:"POST"}).then(()=>{n({event_type:48,object_id_str:o().session.userId}),e(),(0,a.A)()},t)}},623987(e,t,n){n.d(t,{A:()=>a});var i=n(106386);function a({children:e,storyId:t}){let n=(0,i.d4)(({stories:e})=>e[t]);return n&&e(n)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/5260.en_GB-01ddd64ff0f55ac9.mjs.map