(self.modernJsonp=self.modernJsonp||[]).push([["2968"],{655621(e,t,i){i.d(t,{A:()=>a});let a=2},897983(e,t,i){i.d(t,{A:()=>a});let a={BOARD_PICKER:"board_picker",ORGANIZE_PINS:"organize_pins",PROFILE:"profile",PIN_CLUSTER:"create_pin_cluster_page"}},851287(e,t,i){i.d(t,{_:()=>o});let a={á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",æ:"a",ç:"c",é:"e",è:"e",ê:"e",ë:"e",í:"i",ì:"i",î:"i",ï:"i",ñ:"n",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ø:"o",œ:"o",ß:"s",ú:"u",ù:"u",û:"u",ü:"u"},r=e=>{if(!e)return"";let t="";for(let i=0;i<e.length;i+=1)t+=a[e.charAt(i)]||e.charAt(i);return t},o=(e,t,i="name")=>{let a=t.toLowerCase();return e.filter(e=>((e,t)=>{let i=t.split(" "),a=e.split(" "),o=0;for(let e=0;e<a.length;e+=1)(r(a[e]).includes(i[o])||a[e].includes(i[o]))&&(o+=1);return o===i.length})(e[i].toLowerCase(),a))}},854651(e,t,i){i.d(t,{$6:()=>d,$e:()=>s,BS:()=>r,CT:()=>c,RG:()=>o,d8:()=>n,k4:()=>l});var a=i(19821);let r=new a.rk(1),o=new a.rk(3),s=2,n=new a.rk(s),l=3,d=new a.rk(100),c=new a.K5([d])},400235(e,t,i){i.d(t,{Ah:()=>Y,Pc:()=>X,FE:()=>G,K$:()=>ee,cC:()=>Z});var a=i(61163),r=i(859471),o=i(106386),s=i(679902),n=i(19821),l=i(586733),d=i(257300),c=i(693154),h=i(538329),_=i(131094),u=i(542975),g=i(601185),p=i(844255),b=i(703672),m=i(430705),f=i(655621),x=i(385621),y=i(847753),v=i(897983),S=i(854651),w=i(168079),A=i(562615);function B({children:e,headingLevel:t,textWeight:i="normal",size:o}){(0,r.useEffect)(()=>{(0,a.A)("BoardHeader","/app/www/common/PinBetterSave/BoardHeader.tsx")},[]);let s="100"===o?"200":o,l="500"===o||"600"===o?"400":o;return(0,A.jsx)(n._Y,{accessibilityLevel:t,size:s,children:(0,A.jsx)(n.KJ,{inline:!0,size:l,weight:i,children:e})})}function j({boardPickerSuggestedBoards:e,clientTrackingParams:t,headingLevel:i=3,imageSignature:o,index:s,item:d,pinId:c,saveSessionId:h,surfaceOriginViewParameter:_,useLegoLayout:u}){(0,r.useEffect)(()=>{(0,a.A)("BoardHeader","/app/www/common/PinBetterSave/BoardHeader.tsx")},[]);let{logContextEvent:g}=(0,l.o)();return(0,w.A)(()=>{"shortlist"===d.category&&g({aux_data:{board_picker_surface_origin:_,board_picker_suggested_boards:e,image_signature:o,pin_id:c,save_session_id:h},event_type:13,clientTrackingParams:t,view_type:21,view_parameter:3988})}),(0,A.jsx)(n.az,{marginTop:s>0?2:1,paddingX:u?4:3,paddingY:1,children:(0,A.jsx)(B,{headingLevel:i,size:u?"100":"200",children:d.title})})}var z=i(803783),P=i(573999),k=i(753771),C=i(580740);let L=(0,z.Q)()?function(e){let t,i,a,o,s,d,c,_,u,g,p,b,m,f,x,y,v,S,B,j,z,L,I,T=(0,P.c)(94),{accessibilityLabelText:R,board:E,boardPickerSuggestedBoards:F,buttonText:O,clientTrackingParams:H,displayAlreadySavedMsg:J,gridIndex:D,imageSignature:N,isSectionOpen:M,onButtonClick:$,onClick:W,pinId:K,saveSessionId:U,shouldOpenSections:Y,showSaveToProfile:q,showFlyoutSaveButton:V,surfaceOriginViewParameter:Q,useLegoLayout:G}=e,X=void 0===Y||Y;T[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.o)(),T[0]=t):t=T[0];let{logContextEvent:Z}=t,ee=(0,h.A)(),[et,ei]=(0,r.useState)(!1),ea=(0,r.useRef)(null),er=!!E.section_count&&E.section_count>0,eo=er?"boardWithSection":"boardWithoutSection";T[1]!==E?(i=E||{},T[1]=E,T[2]=i):i=T[2];let{images:es,image_cover_url:en}=i;T[3]!==en||T[4]!==es?(a=!en?.includes("custom")&&es&&es["75x75"]&&es["75x75"][es["75x75"].length-1].url,T[3]=en,T[4]=es,T[5]=a):a=T[5];let el=a||en;T[6]!==E.type||T[7]!==F||T[8]!==H||T[9]!==D||T[10]!==N||T[11]!==K||T[12]!==U||T[13]!==Q?(o=()=>{"boardless"===E.type&&Z({aux_data:{board_index:D,board_picker_surface_origin:Q,board_picker_suggested_boards:F,image_signature:N,pin_id:K,save_session_id:U},clientTrackingParams:H,event_type:13,view_parameter:3990,view_type:21})},T[6]=E.type,T[7]=F,T[8]=H,T[9]=D,T[10]=N,T[11]=K,T[12]=U,T[13]=Q,T[14]=o):o=T[14],(0,w.A)(o),T[15]!==er||T[16]!==M?(s=()=>{ea.current&&M&&er&&ea.current.focus()},d=[ea,M,er],T[15]=er,T[16]=M,T[17]=s,T[18]=d):(s=T[17],d=T[18]),(0,r.useEffect)(s,d),T[19]!==E||T[20]!==W?(c=()=>{W(E)},T[19]=E,T[20]=W,T[21]=c):c=T[21];let ed=c;T[22]!==ed||T[23]!==$?(_=e=>{let{event:t}=e;ed(),$&&$(),t.stopPropagation()},T[22]=ed,T[23]=$,T[24]=_):_=T[24];let ec=_,eh=n.az,e_=n.Rp,eu=M&&er?"board-row-input":void 0;T[25]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{ei(!1)},g=()=>{ei(!0)},p=()=>{ei(!0)},b=()=>{ei(!1)},T[25]=u,T[26]=g,T[27]=p,T[28]=b):(u=T[25],g=T[26],p=T[27],b=T[28]);let eg=n.az,ep=et?"secondary":"default",eb=`board-row-${E.name||""}`,em=G?64:52,ef=+!G,ex=G?2:3,ey=G?2:3,ev=+!G,eS=2*!!G,ew=G?48:36,eA=+!G,eB=G?2:3,ej=2*!G,ez=+!G,eP=G?48:36;T[29]!==E.type||T[30]!==et||T[31]!==q?(m=q&&"boardless"===E.type&&(0,A.jsx)(n.n1,{height:"100%",rounding:200,width:"100%",children:(0,A.jsx)(n.az,{alignItems:"center",color:et?"default":"secondary",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:(0,A.jsx)(n.az,{children:(0,A.jsx)(n.In,{accessibilityLabel:"",color:"default",icon:"clock-history",size:24})})})}),T[29]=E.type,T[30]=et,T[31]=q,T[32]=m):m=T[32],T[33]!==el||T[34]!==X||T[35]!==G?(f=el&&!X&&(0,A.jsx)(n.n1,{height:G?48:36,rounding:200,wash:!0,width:G?48:36,children:(0,A.jsx)(n._V,{alt:"",fit:"cover",naturalHeight:G?48:36,naturalWidth:G?48:36,src:el})}),T[33]=el,T[34]=X,T[35]=G,T[36]=f):f=T[36],T[37]!==el||T[38]!==X||T[39]!==G?(x=el&&X?(0,A.jsx)(n.n1,{height:G?48:36,rounding:200,wash:!0,width:G?48:36,children:(0,A.jsx)(n._V,{alt:"",fit:"cover",naturalHeight:G?48:36,naturalWidth:G?48:36,src:el})}):(0,A.jsx)(n.n1,{height:G?48:36,rounding:200,width:G?48:36,children:(0,A.jsx)(n.az,{color:X?"secondary":"transparent",height:"100%",width:"100%"})}),T[37]=el,T[38]=X,T[39]=G,T[40]=x):x=T[40],T[41]!==ew||T[42]!==eA||T[43]!==eB||T[44]!==ej||T[45]!==ez||T[46]!==eP||T[47]!==m||T[48]!==f||T[49]!==x?(y=(0,A.jsxs)(n.az,{"aria-hidden":"true",flex:"none",height:ew,marginBottom:eA,marginEnd:eB,marginStart:ej,marginTop:ez,overflow:"hidden",width:eP,children:[m,f,x]}),T[41]=ew,T[42]=eA,T[43]=eB,T[44]=ej,T[45]=ez,T[46]=eP,T[47]=m,T[48]=f,T[49]=x,T[50]=y):y=T[50];let ek=+!G,eC=X||!X?"bold":"normal";T[51]!==E.name||T[52]!==eC?(v=(0,A.jsx)(n.KJ,{lineClamp:1,overflow:"breakAll",weight:eC,children:E.name}),T[51]=E.name,T[52]=eC,T[53]=v):v=T[53];let eL=J&&(0,A.jsx)(n.az,{marginTop:1,children:(0,A.jsx)(n.KJ,{align:"start",color:"default",size:"100",children:ee.bt("Saved here already", "Saved here already", "BoardFlyout.AlreadySaved.Message", undefined, true)})});T[54]!==ek||T[55]!==v||T[56]!==eL?(S=(0,A.jsxs)(n.az,{flex:"grow",marginStart:ek,overflow:"hidden",paddingY:1,children:[v,eL]}),T[54]=ek,T[55]=v,T[56]=eL,T[57]=S):S=T[57];let eI=n.so,eT=(0===E.section_count||!X)&&(void 0===V||V)&&(0,A.jsx)(n.az,{"data-test-id":"board-row-save-button-container",flex:"none",opacity:100*!!et,children:(0,A.jsx)(n.$n,{accessibilityLabel:R||ee.bt("save", "save", "boardRow.saveButton", undefined, true),color:"primary","data-test-id":"board-row-save-button",onClick:ec,tabIndex:-1,text:O||ee.bt("Save", "Save", "save button", undefined, true)})});return T[58]!==E||T[59]!==er||T[60]!==M||T[61]!==X||T[62]!==G?(B=E&&!M?(0,A.jsx)(n.az,{marginEnd:2*!G,children:(0,A.jsx)(C.A,{board:E,showCollaborativeIcon:!!E.is_collaborative,showPrivateIcon:E.privacy===k.A.BoardPrivacy.SECRET,showProtectedIcon:E.privacy===k.A.BoardPrivacy.PROTECTED,showSectionsIcon:er&&X,useLegoLayout:G})}):null,T[58]=E,T[59]=er,T[60]=M,T[61]=X,T[62]=G,T[63]=B):B=T[63],T[64]!==eI||T[65]!==eT||T[66]!==B?(j=(0,A.jsxs)(eI,{alignItems:"center",gap:2,children:[eT,B]}),T[64]=eI,T[65]=eT,T[66]=B,T[67]=j):j=T[67],T[68]!==eg||T[69]!==ep||T[70]!==eb||T[71]!==em||T[72]!==ef||T[73]!==ex||T[74]!==ey||T[75]!==ev||T[76]!==eS||T[77]!==y||T[78]!==S||T[79]!==j?(z=(0,A.jsxs)(eg,{alignItems:"center",color:ep,"data-test-id":eb,display:"flex",height:em,marginBottom:ef,marginEnd:ex,marginStart:ey,marginTop:ev,padding:eS,rounding:300,children:[y,S,j]}),T[68]=eg,T[69]=ep,T[70]=eb,T[71]=em,T[72]=ef,T[73]=ex,T[74]=ey,T[75]=ev,T[76]=eS,T[77]=y,T[78]=S,T[79]=j,T[80]=z):z=T[80],T[81]!==e_||T[82]!==ed||T[83]!==eu||T[84]!==u||T[85]!==g||T[86]!==p||T[87]!==b||T[88]!==z?(L=(0,A.jsx)(e_,{ref:ea,dataTestId:eu,onBlur:u,onFocus:g,onMouseEnter:p,onMouseLeave:b,onTap:ed,children:z}),T[81]=e_,T[82]=ed,T[83]=eu,T[84]=u,T[85]=g,T[86]=p,T[87]=b,T[88]=z,T[89]=L):L=T[89],T[90]!==eh||T[91]!==L||T[92]!==eo?(I=(0,A.jsx)(eh,{"data-test-id":eo,role:"listitem",children:L}),T[90]=eh,T[91]=L,T[92]=eo,T[93]=I):I=T[93],I}:function({accessibilityLabelText:e,board:t,boardPickerSuggestedBoards:i,buttonText:a,clientTrackingParams:o,displayAlreadySavedMsg:s,gridIndex:d,imageSignature:c,isSectionOpen:_,onButtonClick:u,onClick:g,pinId:p,saveSessionId:b,shouldOpenSections:m=!0,showSaveToProfile:f,showFlyoutSaveButton:x=!0,surfaceOriginViewParameter:y,useLegoLayout:v}){let{logContextEvent:S}=(0,l.o)(),B=(0,h.A)(),[j,z]=(0,r.useState)(!1),P=(0,r.useRef)(null),L=!!t.section_count&&t.section_count>0,I=L?"boardWithSection":"boardWithoutSection",{images:T,image_cover_url:R}=t||{},E=!R?.includes("custom")&&T&&T["75x75"]&&T["75x75"][T["75x75"].length-1].url||R;(0,w.A)(()=>{"boardless"===t.type&&S({aux_data:{board_index:d,board_picker_surface_origin:y,board_picker_suggested_boards:i,image_signature:c,pin_id:p,save_session_id:b},clientTrackingParams:o,event_type:13,view_parameter:3990,view_type:21})}),(0,r.useEffect)(()=>{P.current&&_&&L&&P.current.focus()},[P,_,L]);let F=()=>{g(t)};return(0,A.jsx)(n.az,{"data-test-id":I,role:"listitem",children:(0,A.jsx)(n.Rp,{ref:P,dataTestId:_&&L?"board-row-input":void 0,onBlur:()=>{z(!1)},onFocus:()=>{z(!0)},onMouseEnter:()=>{z(!0)},onMouseLeave:()=>{z(!1)},onTap:F,children:(0,A.jsxs)(n.az,{alignItems:"center",color:j?"secondary":"default","data-test-id":`board-row-${t.name||""}`,display:"flex",height:v?64:52,marginBottom:+!v,marginEnd:v?2:3,marginStart:v?2:3,marginTop:+!v,padding:2*!!v,rounding:300,children:[(0,A.jsxs)(n.az,{"aria-hidden":"true",flex:"none",height:v?48:36,marginBottom:+!v,marginEnd:v?2:3,marginStart:2*!v,marginTop:+!v,overflow:"hidden",width:v?48:36,children:[f&&"boardless"===t.type&&(0,A.jsx)(n.n1,{height:"100%",rounding:200,width:"100%",children:(0,A.jsx)(n.az,{alignItems:"center",color:j?"default":"secondary",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:(0,A.jsx)(n.az,{children:(0,A.jsx)(n.In,{accessibilityLabel:"",color:"default",icon:"clock-history",size:24})})})}),E&&!m&&(0,A.jsx)(n.n1,{height:v?48:36,rounding:200,wash:!0,width:v?48:36,children:(0,A.jsx)(n._V,{alt:"",fit:"cover",naturalHeight:v?48:36,naturalWidth:v?48:36,src:E})}),E&&m?(0,A.jsx)(n.n1,{height:v?48:36,rounding:200,wash:!0,width:v?48:36,children:(0,A.jsx)(n._V,{alt:"",fit:"cover",naturalHeight:v?48:36,naturalWidth:v?48:36,src:E})}):(0,A.jsx)(n.n1,{height:v?48:36,rounding:200,width:v?48:36,children:(0,A.jsx)(n.az,{color:m?"secondary":"transparent",height:"100%",width:"100%"})})]}),(0,A.jsxs)(n.az,{flex:"grow",marginStart:+!v,overflow:"hidden",paddingY:1,children:[(0,A.jsx)(n.KJ,{lineClamp:1,overflow:"breakAll",weight:m||!m?"bold":"normal",children:t.name}),s&&(0,A.jsx)(n.az,{marginTop:1,children:(0,A.jsx)(n.KJ,{align:"start",color:"default",size:"100",children:B.bt("Saved here already", "Saved here already", "BoardFlyout.AlreadySaved.Message", undefined, true)})})]}),(0,A.jsxs)(n.so,{alignItems:"center",gap:2,children:[(0===t.section_count||!m)&&x&&(0,A.jsx)(n.az,{"data-test-id":"board-row-save-button-container",flex:"none",opacity:100*!!j,children:(0,A.jsx)(n.$n,{accessibilityLabel:e||B.bt("save", "save", "boardRow.saveButton", undefined, true),color:"primary","data-test-id":"board-row-save-button",onClick:({event:e})=>{F(),u&&u(),e.stopPropagation()},tabIndex:-1,text:a||B.bt("Save", "Save", "save button", undefined, true)})}),t&&!_?(0,A.jsx)(n.az,{marginEnd:2*!v,children:(0,A.jsx)(C.A,{board:t,showCollaborativeIcon:!!t.is_collaborative,showPrivateIcon:t.privacy===k.A.BoardPrivacy.SECRET,showProtectedIcon:t.privacy===k.A.BoardPrivacy.PROTECTED,showSectionsIcon:L&&m,useLegoLayout:v})}):null]})]})})})};var I=i(870540),T=i(281817);function R(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class E extends r.Component{constructor(...e){super(...e),R(this,"state",{hovered:!1}),R(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),R(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),R(this,"handleTouch",()=>{let{board:e,onClick:t,section:i}=this.props;t(i,e)}),R(this,"handleButtonClick",({event:e})=>{let{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),R(this,"tapAreaRef",(0,r.createRef)())}focus(){let e=this.tapAreaRef.current;e&&e.focus()}render(){let{hovered:e}=this.state,{buttonText:t,section:i,showSectionSaveButton:a,useLegoLayout:r}=this.props;return(0,A.jsx)(n.Rp,{ref:this.tapAreaRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,children:(0,A.jsxs)(n.az,{alignItems:"center",color:e?"secondary":"default",dangerouslySetInlineStyle:{__style:r?{}:{marginLeft:53,marginRight:11}},"data-test-id":`section-row-${i.title||""}`,display:"flex",height:r?64:52,marginEnd:2*!!r,marginStart:2*!!r,marginTop:+!r,padding:2*!!r,role:"listitem",rounding:300,children:[r&&!!i.preview_pins?.length&&(0,A.jsx)(T.A,{image_url:i.preview_pins[0].image_square_url??"",naturalHeight:i.preview_pins[0].image_square_size_pixels?.height??1,naturalWidth:i.preview_pins[0].image_square_size_pixels?.width??1}),(0,A.jsx)(n.az,{flex:"grow",marginStart:4*!r,paddingY:1,children:(0,A.jsx)(n.KJ,{lineClamp:1,weight:r?"bold":"normal",children:i.title})}),e&&a&&(0,A.jsx)(n.az,{flex:"none",marginEnd:2*!r,children:(0,A.jsx)(n.$n,{accessibilityLabel:"save button",color:"primary",onClick:this.handleButtonClick,text:t||this.props.i18n.bt("Save", "Save", "save button", undefined, true)})})]})})}componentDidMount(){(0,a.A)("SectionRow","/app/www/common/PinBetterSave/SectionRow.tsx")}}function F(e){(0,r.useEffect)(()=>{(0,a.A)("SectionRow","/app/www/common/PinBetterSave/SectionRow.tsx")},[]);let t=(0,h.A)();return(0,A.jsx)(E,{...e,i18n:t})}function O(e){(0,r.useEffect)(()=>{(0,a.A)("BoardSections","/app/www/common/PinBetterSave/BoardSections.tsx")},[]);let t=(0,h.A)(),{board:i,buttonText:o,onClick:s,onButtonClick:l,showSectionSaveButton:d,useLegoLayout:_}=e,u=(0,I.A)(),g=(0,c.A)(),p=(0,y.H7)(g,u),b=(0,m.A)({name:"BoardSectionsRepinResource",options:{board_id:i.id,orbac_subject_id:p},noCache:!0}),f=b&&b.data||[];return(0,A.jsxs)(n.az,{children:[!b.isLoaded&&(0,A.jsx)(n.so,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,A.jsx)(n.y$,{accessibilityLabel:t.bt("loading board picker", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})}),b.isLoaded&&(0,A.jsxs)(n.az,{children:[_&&(0,A.jsx)(n.az,{marginStart:4,marginTop:2,paddingY:1,children:(0,A.jsx)(B,{headingLevel:3,size:"200",children:t.bt("Section", "Section", "PinBetterSave.BoardFlyout.SectionPlaceholderText", undefined, true)})}),f.map(e=>(0,A.jsx)(F,{board:i,buttonText:o,onButtonClick:l,onClick:s,section:e,showSectionSaveButton:d,useLegoLayout:_},e.id))]})]})}function H({onClick:e,title:t,showIcon:i}){(0,r.useEffect)(()=>{(0,a.A)("BoardSuggestionRow","/app/www/common/PinBetterSave/BoardSuggestionRow.tsx")},[]);let o=(0,h.A)(),[s,l]=(0,r.useState)(!1);return(0,A.jsx)(n.Rp,{dataTestId:"board-suggestion-row-button",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onTap:()=>{e({title:t})},children:(0,A.jsxs)(n.az,{alignItems:"center",color:s?"secondary":"default",display:"flex",height:i?64:52,marginBottom:1,marginEnd:3,marginStart:3,role:"listitem",rounding:300,children:[(0,A.jsx)(n.az,{flex:"none",height:i?48:36,marginBottom:1,marginEnd:3,marginStart:i?1:2,marginTop:1,overflow:"hidden",rounding:i?200:100,width:i?48:36,children:(0,A.jsx)(n.az,{alignItems:i?"center":void 0,color:"secondary",display:i?"flex":void 0,height:"100%",justifyContent:i?"center":void 0,width:"100%",children:i&&(0,A.jsx)(n.In,{accessibilityLabel:"",color:"default",icon:"plus",size:20})})}),(0,A.jsx)(n.az,{flex:"grow",paddingY:1,children:(0,A.jsx)(n.KJ,{lineClamp:1,weight:"bold",children:t})}),s&&(0,A.jsx)(n.az,{marginEnd:2,children:(0,A.jsx)(n.$n,{accessibilityLabel:"create button",color:"primary",text:o.bt("Create", "Create", "create button to create a new board", undefined, true)})})]})})}function J(e){(0,r.useEffect)(()=>{(0,a.A)("BoardSuggestions","/app/www/common/PinBetterSave/BoardSuggestions.tsx")},[]);let t=(0,h.A)(),{suggestionsResource:i,onClick:o,pinBuilderSuggestions:s,inWebRepinFlowExp:l}=e,d=s||i&&i.data||[],c=(0,A.jsxs)(r.Fragment,{children:[l&&(0,A.jsx)(n.az,{marginStart:4,marginTop:2,paddingY:1,children:(0,A.jsx)(B,{headingLevel:3,size:"100",children:t.bt("Suggestions", "Suggestions", "PinBetterSave.BoardFlyout.SectionPlaceholderText", undefined, true)})}),d.map((e,t)=>(0,A.jsx)(H,{onClick:o,showIcon:l,title:e.title},t))]});return(0,A.jsx)(r.Fragment,{children:d?c:(0,A.jsx)(n.so,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,A.jsx)(n.y$,{accessibilityLabel:t.bt("loading board suggestions", "loading board suggestions", "accessibility text for loading spinner", undefined, true),show:!0})})})}function D({isBoardCreate:e,onCreateBoardClick:t,useLegoLayout:i}){(0,r.useEffect)(()=>{(0,a.A)("CreateBoardButton","/app/www/common/PinBetterSave/CreateBoardButton.tsx")},[]);let o=(0,h.A)(),[s,l]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1);return(0,A.jsx)(n.az,{"data-test-id":"create-board",display:"flex",height:"100%",rounding:200,children:(0,A.jsx)(n.Rp,{dataTestId:e?"create-board-button":"create-section-button",onBlur:()=>c(!1),onFocus:()=>c(!0),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onTap:t,rounding:200,children:(0,A.jsxs)(n.az,{alignItems:"center",color:s?"secondary":"default",dangerouslySetInlineStyle:{__style:{...d?{border:"2px solid var(--sema-color-border-focus-outer-default)"}:{}}},display:"flex",height:"100%",padding:i?4:2,width:"100%",children:[(0,A.jsx)(n.az,{color:i?"secondary":"transparent",dangerouslySetInlineStyle:{__style:i?{padding:"14px"}:{}},marginEnd:i?2:5,marginStart:4*!i,rounding:200*!!i,children:(0,A.jsx)(n.In,{accessibilityLabel:"",color:i?"default":"error",icon:i?"plus":"circle-plus",size:i?20:28})}),e?(0,A.jsx)(n.KJ,{align:"center",lineClamp:1,weight:"bold",children:o.bt("Create board", "Create board", " - ", undefined, true)}):(0,A.jsx)(n.KJ,{align:"center",lineClamp:1,weight:"bold",children:o.bt("Create section", "Create section", " - ", undefined, true)})]})})})}R(E,"defaultProps",{showSectionSaveButton:!0});var N=i(851287);function M(e){(0,r.useEffect)(()=>{(0,a.A)("FocusableSearchField","/app/www/save/board/FocusableSearchField.tsx")},[]);let{accessibilityClearButtonLabel:t,accessibilityLabel:i,focused:o,id:s,onBlur:l,onChange:d,onFocus:c,placeholder:h,value:_,size:u="lg"}=e,g=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(o){let e=g.current;window.requestAnimationFrame(()=>{let t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()})}},[o]),(0,A.jsx)(n.az,{ref:g,children:(0,A.jsx)(n.Lw,{accessibilityClearButtonLabel:t,accessibilityLabel:i,id:s,onBlur:l,onChange:d,onFocus:c,placeholder:h,size:u,value:_})})}function $(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let W="allBoards",K="shortlist",U=`
.BoardsSlideLeft {
  animation: boardFlyoutSlideLeft 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideRight {
  animation: boardFlyoutSlideRight 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideLeftRTL {
  animation: boardFlyoutSlideLeftRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideRightRTL {
  animation: boardFlyoutSlideRightRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

@keyframes boardFlyoutSlideLeft {
  from {
    margin-left: 0%;
  }

  to {
    margin-left: -100%;
  }
}

@keyframes boardFlyoutSlideRight {
  from {
    margin-left: -100%;
  }

  to {
    margin-left: 0%;
  }
}

@keyframes boardFlyoutSlideLeftRTL {
  from {
    margin-right: -100%;
  }

  to {
    margin-right: 0%;
  }
}

@keyframes boardFlyoutSlideRightRTL {
  from {
    margin-right: 0%;
  }

  to {
    margin-right: -100%;
  }
}
`;class Y extends r.PureComponent{constructor(...e){super(...e),$(this,"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0,saveSessionId:(0,s.A)()}),$(this,"handleScroll",()=>{let{_container:e}=this,{logContextEvent:t}=this.props;t({event_type:110,component:13282,view_type:21})}),$(this,"refHandler",e=>{this.removeEventListeners(),e&&e.addEventListener("scroll",this.handleScroll,{once:!0}),this._container=e}),$(this,"getItems",e=>{let{boardResource:t,showSaveToProfile:i,checkExperiment:a}=this.props;if(!t?.data)return[];let{all_boards:r}=t.data,o=r.length>=3,s=i&&r.length&&a("web_curation_board_picker_reorder_profile_option").anyEnabled,n=[{boardId:"",image_cover_url:"",is_collaborative:!1,isOpen:!1,name:this.props.i18n.bt("Profile", "Profile", "pinBetterSave.initialSelection.boardlessPinsOption", undefined, true),privacy:"public",section_count:0,type:"boardless",url:"/me/"}],l=this.getAllBoards().map((e,t)=>this.mapBoards(e,W,t)),d=this.getShortlist().map((e,t)=>this.mapBoards(e,K,t)),{searchQuery:c}=this.state;return c.length>=f.A?[...(0,N._)(l,c)]:[...o||!i||s?[]:[{type:"header",title:this.props.i18n.bt("Quick save and organise later", "Quick save and organize later", "BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.boardlessPinsTitle", undefined, true)},...n],...o&&o&&i&&!s?n:[],...o&&d?.length?[{category:K,type:"header",title:e?this.props.i18n.bt("Top choices", "Top choices", "PinBetterSave.BoardFlyout.TopChoicesSectionTitle", undefined, true):this.props.i18n.bt("Top board suggestions", "Top board suggestions", "Header for top suggesions in board picker", undefined, true)},...d]:[],...r.length>0?[{type:"header",title:!o&&i?this.props.i18n.bt("Save to board", "Save to board", "BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.saveToBoardTitle", undefined, true):this.props.i18n.bt("All boards", "All boards", "Header for all boards in board picker", undefined, true)},...l,...s?n:[]]:[]]}),$(this,"mapBoards",(e,t,i)=>{let{selectedBoardId:a,selectedBoardCategory:r}=this.state,o=e.id===a&&t===r;return{...e,category:t,isOpen:o,gridIndex:i}}),$(this,"handleBack",()=>{let{setBoardWithSection:e}=this.props;this.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),e&&e(null)}),$(this,"handleSectionClick",(e,t)=>{let{clientTrackingParams:i,imageSignature:a,logContextEvent:r,onItemChosen:o,pinId:s,surfaceOriginViewParameter:n,surface:l}=this.props,{saveSessionId:d,searchQuery:c}=this.state;r({event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:t.id,view_type:91,view_parameter:3133,aux_data:{board_id:t.id,board_picker_surface_origin:n,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:t.gridIndex,image_signature:a,is_profile_save:!1,pin_id:s,save_session_id:d,search_query:c,section_id:e.id,source:l}}),o({boardId:t.id,url:e.slug?`${t.url}${e.slug}/`:t.url,sectionId:e.id,title:e.title||"",type:e.type,imageCoverUrl:t.image_cover_url,ownerUsername:t.owner&&t.owner.username||"",boardPickerSuggestedBoards:JSON.stringify(this.getTopChoiceBoardsAuxData())})}),$(this,"getPinBuilderSuggestions",async()=>{let{clientTrackingParams:e,imageSignature:t,logContextEvent:i,pinId:a,surfaceOriginViewParameter:r}=this.props,{saveSessionId:o}=this.state;if(a){let s=await (0,d.A)({url:"/v3/pins/{pin}/board_title_suggestions/",urlParams:{pin:a}});if(s.resource_response.data){let n=s.resource_response.data.map(e=>({title:e.title??"",metadata:JSON.parse(e?.metadata??"{}")}))||[];this.setState({boardSuggestions:n}),i({aux_data:{board_picker_surface_origin:r,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),image_signature:t,pin_id:a,save_session_id:o},component:13282,clientTrackingParams:e,event_type:13,view_parameter:3992,view_type:21})}}}),$(this,"getAllBoards",()=>{let{boardResource:e,advertiser_id:t}=this.props;return(e?.data?.all_boards||[]).filter(e=>!t||"secret"!==e.privacy)}),$(this,"getShortlist",()=>{let{suggestedBoardsShortListResource:e,displayShortlistMostRecentBoard:t,boardResource:i}=this.props,a=i?.data?.boards_shortlist||[];return t?a:e?.data||[]}),$(this,"getBoards",e=>e===W?this.getAllBoards():e===K?this.getShortlist():[]),$(this,"getSuggestedBoardsIds",()=>{let{showSaveToProfile:e}=this.props,t=(e?this.getShortlist().slice(0,2):this.getShortlist()).map(e=>e.id);return e&&t.unshift("PROFILE_PINS"),t}),$(this,"getTopChoiceBoardsAuxData",()=>{let{showSaveToProfile:e}=this.props;return(e?this.getShortlist().slice(0,2):[...this.getShortlist()]).map(e=>({board_title_id:String(e.id),board_title_kind:JSON.parse(e.recommendation_reason??"{}").reason,board_title:String(e.name),board_title_score:JSON.parse(e.recommendation_reason??"{}").score}))}),$(this,"getBoardTitleSuggestionsAuxData",()=>{let{boardSuggestions:e}=this.state;return e.map(e=>({board_title_id:String(e.metadata.value),board_title_kind:String(e.metadata.kind),board_title:String(e.title),board_title_score:String(e.metadata.confidence)}))}),$(this,"handleBoardWithSectionsClick",e=>{let{clientTrackingParams:t,logContextEvent:i,pinId:a,setBoardWithSection:r,surfaceOriginViewParameter:o}=this.props,{saveSessionId:s,searchQuery:n,selectedBoardId:l,selectedBoardCategory:d}=this.state,c=this.getBoards(e.category).find(({id:t})=>t===e.id),h=l===e.id&&d===e.category;i({event_type:13,clientTrackingParams:t,component:13282,element:36,object_id_str:e.id,view_type:275,aux_data:{board_id:e.id,board_picker_surface_origin:o,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,is_profile_save:!1,pin_id:a,save_session_id:s,search_query:n}}),c&&r&&r(c),this.setState({isSectionOpen:!0,selectedBoardId:h?"":e.id,selectedBoardCategory:h?"":e.category})}),$(this,"handleBoardClick",({board:e,toggleSections:t})=>{let{clientTrackingParams:i,imageSignature:a,logContextEvent:r,onItemChosen:o,pinId:s,surfaceOriginViewParameter:n,surface:l}=this.props,{saveSessionId:d,searchQuery:c}=this.state;this.setState({searchBoxFocused:!1}),t?(r({event_type:101,component:13282,element:36,clientTrackingParams:i,object_id_str:e.id,view_type:91,view_parameter:e.category===K?3988:3989,aux_data:{board_id:e.id,board_component:e.category===K?3988:3989,board_picker_surface_origin:n,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,image_signature:a,is_profile_save:!1,pin_id:s,save_session_id:d,search_query:c}}),this.handleBoardWithSectionsClick({category:e.category,gridIndex:e.gridIndex,id:e.id})):(r("boardless"===e.type?{event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:e.id,view_type:91,view_parameter:3990,aux_data:{board_id:e.id,board_component:3990,board_picker_surface_origin:n,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,image_signature:a,is_profile_save:!0,pin_id:s,save_session_id:d,search_query:c}}:{event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:e.id,view_type:91,view_parameter:e.category===K?3988:3989,aux_data:{board_id:e.id,board_component:e.category===K?3988:3989,board_picker_surface_origin:n,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,image_signature:a,is_profile_save:"boardless"===e.type,pin_id:s,save_session_id:d,search_query:c,source:l}}),o({boardId:e.id,url:e.url,title:e.name||"",type:e.type,imageCoverUrl:e.image_cover_url,privacy:e.privacy,boardPickerSuggestedBoards:JSON.stringify(this.getTopChoiceBoardsAuxData())}))}),$(this,"handleSearchQueryUpdate",e=>{this.setState(t=>({...t,searchQuery:e}))}),$(this,"handleCreateBoardClick",e=>{let{clientTrackingParams:t,imageSignature:i,logContextEvent:a,onBoardCreate:r,pinId:o,surfaceOriginViewParameter:s,surface:n}=this.props,{saveSessionId:l,searchQuery:d}=this.state;a({event_type:101,clientTrackingParams:t,component:13282,element:249,view_type:91,view_parameter:e?87:3132,aux_data:{board_component:e?87:3132,board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),image_signature:i,pin_id:o,save_session_id:l,search_query:d,source:n??v.A.BOARD_PICKER}}),r({title:d})}),$(this,"handleBoardSuggestionClick",e=>{let{clientTrackingParams:t,imageSignature:i,logContextEvent:a,onBoardCreate:r,pinId:o,surfaceOriginViewParameter:s}=this.props,{saveSessionId:n}=this.state;a({event_type:101,clientTrackingParams:t,component:13282,element:23,view_type:91,view_parameter:3992,aux_data:{board_picker_surface_origin:s,board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),image_signature:i,pin_id:o,save_session_id:n}}),r(e)})}componentWillUnmount(){this.removeEventListeners()}componentDidMount(){let{clientTrackingParams:e,logContextEvent:t,imageSignature:i,pinId:a,setBoardWithSection:r,surfaceOriginViewParameter:o}=this.props,{saveSessionId:s}=this.state;r&&r(null),t({event_type:13,component:13282,clientTrackingParams:e,element:10960,aux_data:{board_picker_surface_origin:o,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),image_signature:i,pin_id:a,save_session_id:s}})}componentDidUpdate(e){let{saveSessionId:t}=this.state,{clientTrackingParams:i}=this.props;!e.suggestedBoardsShortListResource?.isLoaded&&this.props.suggestedBoardsShortListResource?.isLoaded&&this.getSuggestedBoardsIds().length>0&&this.props.logContextEvent({event_type:13,clientTrackingParams:i,component:13282,element:1001,aux_data:{pin_id:this.props.pinId,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),save_session_id:t}})}removeEventListeners(){let{_container:e}=this;e&&e.removeEventListener("scroll",this.handleScroll)}render(){let{accessibilityLabelText:e,boardResource:t,buttonText:i,changeBoardModal:a,clientTrackingParams:o,customItem:s,headerText:l,hideAlreadySavedMsg:d,imageSignature:c,onButtonClick:h,paneHeight:g,paneWidth:p,pinAlreadySavedBoard:b,pinId:m,requestContext:f,sectionText:x,showSaveToProfile:y,showSearchField:v,showCreateBoardButton:w,showFlyoutSaveButton:z,showSections:P,showSectionSaveButton:k,suggestedBoardsShortListResource:C,surfaceOriginViewParameter:I,useStoryboardStyle:T,useLegoLayout:R,boardFlyoutStyle:E}=this.props,{boardSuggestions:F,isSectionOpen:H,saveSessionId:N,searchBoxFocused:$,searchQuery:K}=this.state;if(!t)return null;let{isLoaded:Y,error:q}=t,V=[];(Y&&!q||C&&C.data&&!C.error)&&(V=this.getItems(!!R));let Q=V.filter(e=>e&&e.category===W).length,G=Q>3;G||0!==F.length||this.getPinBuilderSuggestions();let X=T?200:322,Z=T?214:334,ee=g||290,et=JSON.stringify(this.getTopChoiceBoardsAuxData()),ei=f.isRTL?"BoardsSlideRightRTL":"BoardsSlideLeft",ea="";null!==H&&(ea=f.isRTL?"BoardsSlideLeftRTL":"BoardsSlideRight");let er=e=>(0,A.jsxs)(r.Fragment,{children:[!R&&(0,A.jsx)(n.cG,{}),(0,A.jsx)(n.az,{dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}},elevation:R&&Q>=3&&V.length>1?"shadowFloating":void 0,height:R?80:52,overflow:"hidden",children:(0,A.jsx)(D,{isBoardCreate:e,onCreateBoardClick:({event:t})=>{t.stopPropagation(),this.handleCreateBoardClick(e)},useLegoLayout:R})})]});return(0,A.jsxs)(n.az,{color:"default","data-test-id":"board-picker-flyout",height:T||a?"100%":R?498:439,overflow:"hidden",rounding:200,width:R&&!a?"100%":p,zIndex:S.RG,children:[(0,A.jsx)(_.A,{unsafeCSS:U}),Y?null:(0,A.jsx)(n.so,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:R&&!a?360:p,children:(0,A.jsx)(n.y$,{accessibilityLabel:this.props.i18n.bt("loading board picker", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})}),(0,A.jsx)(n.so,{direction:"row",children:Y&&(0,A.jsx)("div",{className:H?ei:ea,children:(0,A.jsx)(n.az,{position:"relative",children:(0,A.jsxs)(n.az,{direction:"row",display:"flex",width:R&&!a?720:(p??0)*2,zIndex:new n.rk(0),children:[(0,A.jsxs)(n.so,{alignItems:"stretch",direction:"column",justifyContent:"start",width:R&&!a?360:p,children:[R&&!a&&(0,A.jsx)(n.so,{alignItems:"center",height:64,justifyContent:"center",children:(0,A.jsx)(B,{headingLevel:2,size:"300",textWeight:"bold",children:l||(y?this.props.i18n.bt("Save", "Save", "PinBetterSave.BoardFlyout.SavePlaceholder", undefined, true):this.props.i18n.bt("Save to board", "Save to board", "PinBetterSave.BoardFlyout.SaveToBoardPlaceholder", undefined, true))})}),(v??!a)&&(0,A.jsxs)(n.az,{"data-test-id":"search-boards-field-container",height:R?64:"auto",padding:E?.searchFieldStyle?.padding??3*!R,paddingX:E?.searchFieldStyle?.paddingX??(R?4:3),paddingY:E?.searchFieldStyle?.paddingY,children:[(0,A.jsx)(M,{accessibilityClearButtonLabel:this.props.i18n.bt("Clear board search text", "Clear board search text", "dropdown.searchField.clearButtonLabel", undefined, true),accessibilityLabel:this.props.i18n.bt("Search through your boards", "Search through your boards", "search bar placeholder text", undefined, true),focused:$,id:"pickerSearchField",onChange:({value:e})=>this.handleSearchQueryUpdate(e),placeholder:this.props.i18n.bt("Search", "Search", "search bar placeholder text", undefined, true),size:E?.searchFieldStyle?.size??"lg",value:K}),(0,A.jsx)(n.az,{"aria-live":"assertive",display:"visuallyHidden",children:Q?(0,u.$)(this.props.i18n.nbt(["Found a board", "Found {{boardCount}} boards"], Q, "PinBetterSave.BoardFlyout.BoardFoundsDropdown", true),{boardCount:Q.toString()}):this.props.i18n.bt("No boards found", "No boards found", "PinBetterSave.BoardFlyout.noBoardFoundsDropdown", undefined, true)})]}),(0,A.jsxs)(n.az,{ref:this.refHandler,maxHeight:R?ee:X,minHeight:R?290:X,overflow:"scrollY",role:"list",children:[C&&!C.isLoaded?(0,A.jsx)(n.az,{"data-test-id":"suggestedBoardsContainer",children:(0,A.jsx)(n.so,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:128.5,width:"100%",children:(0,A.jsx)(n.y$,{accessibilityLabel:this.props.i18n.bt("loading board picker", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})})}):null,s,V.map((t,a)=>"header"===t.type?(0,A.jsx)(j,{boardPickerSuggestedBoards:et,clientTrackingParams:o,headingLevel:2,imageSignature:c,index:a,item:t,pinId:m,saveSessionId:N,surfaceOriginViewParameter:I,useLegoLayout:R},`${t.title}`):(0,A.jsx)(n.az,{children:(0,A.jsx)(L,{accessibilityLabelText:e,board:t,boardPickerSuggestedBoards:et,buttonText:i,clientTrackingParams:o,displayAlreadySavedMsg:b&&b.id===t.id&&!d,gridIndex:a,imageSignature:c,onButtonClick:h,onClick:e=>{this.handleBoardClick({board:e,toggleSections:P&&!!e.section_count})},pinId:m,saveSessionId:N,shouldOpenSections:P,showFlyoutSaveButton:z,showSaveToProfile:y,surfaceOriginViewParameter:I,useLegoLayout:R})},`${t.category}-${t.id}`)),!G&&F.length>0&&(0,A.jsx)(J,{inWebRepinFlowExp:R,onClick:this.handleBoardSuggestionClick,pinBuilderSuggestions:F})]}),w&&er(!0)]}),H&&(0,A.jsxs)(n.az,{direction:"column",display:"flex",marginBottom:2*!!R,width:R&&!a?360:p,children:[(0,A.jsxs)(n.so,{alignContent:"center",alignItems:"center",direction:"row",justifyContent:"center",children:[(0,A.jsx)(n.VP,{span:2,children:(0,A.jsx)(n.az,{alignContent:"center",alignItems:"center",display:"flex",justifyContent:"start",marginStart:3,children:(0,A.jsx)(n.K0,{accessibilityLabel:"Back button",icon:"chevron-left",iconColor:"default",onClick:this.handleBack,size:"sm"})})}),(0,A.jsx)(n.VP,{span:8,children:(0,A.jsx)(n.so,{alignItems:"center",height:R?64:52,justifyContent:"center",children:(0,A.jsx)(B,{headingLevel:2,size:"300",textWeight:"bold",children:x||(R?this.props.i18n.bt("Save Pin to", "Save Pin to", "PinBetterSave.BoardFlyout.SectionHeader", undefined, true):this.props.i18n.bt("Choose section", "Choose section", "Header for section header", undefined, true))})})}),(0,A.jsx)(n.VP,{span:2,children:(0,A.jsx)(n.az,{})})]}),!R&&(0,A.jsx)(n.cG,{}),(0,A.jsx)(n.az,{maxHeight:R?ee:Z,minHeight:R?354:Z,overflow:"scrollY",children:V?(0,A.jsx)(r.Fragment,{children:V&&V.map(e=>"header"===e.type?null:(0,A.jsx)(n.az,{role:"list",children:e.isOpen&&(0,A.jsxs)(r.Fragment,{children:[R&&(0,A.jsx)(n.az,{marginStart:4,marginTop:2,paddingY:1,children:(0,A.jsx)(B,{headingLevel:3,size:"100",children:this.props.i18n.bt("Board", "Board", "PinBetterSave.BoardFlyout.BoardPickerTitle", undefined, true)})}),(0,A.jsx)(L,{board:e,boardPickerSuggestedBoards:et,buttonText:i,displayAlreadySavedMsg:b&&b.id===e.id,gridIndex:e.gridIndex,isSectionOpen:!0,onButtonClick:h,onClick:e=>{this.handleBoardClick({board:e,toggleSections:!1})},saveSessionId:N,shouldOpenSections:!1,showFlyoutSaveButton:z,useLegoLayout:R}),(0,A.jsx)(O,{board:e,buttonText:i,onButtonClick:h,onClick:this.handleSectionClick,showSectionSaveButton:k,useLegoLayout:R})]})},`${e.category}-${e.id}`))}):null}),w&&!a&&er(!1)]})]})})})})]})}}function q(e){let{logContextEvent:t}=(0,l.o)(),i=(0,h.A)(),{checkExperiment:a}=(0,g.A)();return(0,A.jsx)(Y,{...e,checkExperiment:a,i18n:i,logContextEvent:t,requestContext:(0,p._8)()})}function V(e,t,i){let{advertiser:a}=e,r={};if(i&&i.user&&i.user.username&&i.id!==(t.isAuth?t.id:void 0)&&(r.orbacActingAs=i,r.username=i.user.username),t&&a){let i=e.advertiser;if(t.isAuth&&i.is_impersonation)return{hasMUA:i.owner_user_id!==t.id,advertiser_id:i.id,username:i.owner_user_id,...r};if(t.isAuth&&i.owner_user_id!==t.id)return{hasMUA:!0,advertiser_id:i.id,username:i.owner_user_id,...r};if(t.isAuth&&i.owner_user_id===t.id)return{hasMUA:!1,advertiser_id:i.id,username:"me"}}return{advertiser_id:void 0,hasMUA:void 0,...r}}function Q(e){let{advertiser_id:t,hasMUA:i,boardFilter:a="all"}=e,{username:r}=e,o={field_set_key:"board_picker",filter:i?"protected":a,...r?{username:r}:Object.freeze({}),...t?{advertiser_id:t}:{}};return e.orbacActingAs&&e.orbacActingAs.user&&e.orbacActingAs.user.username?o={...o,username:e.orbacActingAs.user.username,orbac_subject_id:e.orbacActingAs.id,filter:a}:"orbacSubjectIdOverride"in e&&e.orbacSubjectIdOverride&&(o={...o,orbac_subject_id:e.orbacSubjectIdOverride,filter:a}),o}function G(e,t){return(i,a)=>i((0,b.Q5)("BoardPickerBoardsResource",Q(V(a(),e,t))))}function X(e){(0,r.useEffect)(()=>{(0,a.A)("BoardFlyout","/app/www/common/PinBetterSave/BoardFlyout.tsx")},[]);let t=(0,c.A)(),i=(0,o.d4)(i=>V(i,t,e.orbacActingAs)),s={...e,...i},n=(0,m.A)({name:"BoardPickerBoardsResource",options:Q(s)});return(0,A.jsx)(q,{...s,boardResource:n})}function Z(e){(0,r.useEffect)(()=>{(0,a.A)("BoardFlyout","/app/www/common/PinBetterSave/BoardFlyout.tsx")},[]);let{orbacActingAsOverride:t,orbacSubjectIdOverride:i,...o}=e,s=(0,x.A)(),n=(0,c.A)(),l=t||s,d=(0,y.H7)(n,l);return(0,A.jsx)(X,{...o,orbacActingAs:d?l:void 0,orbacSubjectIdOverride:i})}function ee(e){(0,r.useEffect)(()=>{(0,a.A)("BoardFlyout","/app/www/common/PinBetterSave/BoardFlyout.tsx")},[]);let t=(0,m.A)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pinId,shortlist_length:2,num_shortlist_suggestions:2}}),{data:i}=(0,m.A)({name:"ApiResource",options:{url:`/v3/pins/${e.pinId}/`,field_sets:["pin.pinned_to_board()"]},noCache:!0});return(0,A.jsx)(q,{...e,pinAlreadySavedBoard:i?.pinned_to_board,suggestedBoardsShortListResource:t})}$(Y,"defaultProps",{clientTrackingParams:void 0,paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0,useLegoLayout:!0})},580740(e,t,i){i.d(t,{A:()=>c});var a=i(61163),r=i(859471),o=i(19821),s=i(198943),n=i(835375),l=i(562615);let d=({collaborator_count:e,useLegoLayout:t,type:i})=>t?(0,l.jsx)(o.az,{marginEnd:2*!!e,children:(0,l.jsx)(n.A,{type:i})}):(0,l.jsx)(n.A,{type:i}),c=({board:e,showCollaborativeIcon:t,showPrivateIcon:i,showProtectedIcon:c,showSectionsIcon:h,useLegoLayout:_})=>{(0,r.useEffect)(()=>{(0,a.A)("BoardPickerRowIconList","/app/www/common/PinBetterSave/BoardPickerRowIconList.tsx")},[]);let u=e?.collaborating_users?.length||0;return t||i||c||h?(0,l.jsxs)(o.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingLeft:8}},"data-test-id":"board-picker-row-icon-list-box",direction:"row",display:"flex",marginEnd:5*!_,children:[i&&(0,l.jsx)(d,{collaborator_count:u,type:"secret",useLegoLayout:_}),c&&(0,l.jsx)(d,{collaborator_count:u,type:"protected",useLegoLayout:_}),t&&(_?(0,l.jsx)(s.A,{board:e,isCompact:!0,ownerOnly:!1}):(0,l.jsx)(n.A,{type:"group"})),h&&(0,l.jsx)(n.A,{type:"sections"})]}):null}},281817(e,t,i){i.d(t,{A:()=>n});var a=i(61163),r=i(859471),o=i(19821),s=i(562615);let n=({image_url:e,naturalHeight:t,naturalWidth:i})=>((0,r.useEffect)(()=>{(0,a.A)("RepinSectionImage","/app/www/common/PinBetterSave/RepinSectionImage.tsx")},[]),(0,s.jsx)(o.az,{"aria-hidden":"true",height:48,marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,children:(0,s.jsx)(o.n1,{height:48,rounding:200,wash:!0,width:48,children:(0,s.jsx)(o._V,{alt:"",naturalHeight:t,naturalWidth:i,src:e})})}))},198943(e,t,i){i.d(t,{A:()=>d});var a=i(61163),r=i(859471),o=i(989457),s=i(693154),n=i(562615);function l(e){let t=e?.imageMediumUrl??e?.image_medium_url??"",i=e?.avatar_color_index??void 0;return{name:e?.fullName??e?.full_name??"",color:i,src:"https://s.pinimg.com/images/user/default_75.png"===t?void 0:t}}function d({board:e,forceViewer:t,isCompact:i,ownerOnly:d}){(0,r.useEffect)(()=>{(0,a.A)("CollaboratorsFacepile","/app/www/profile/ProfileBoardCard/ProfileBoardCardFooter/CollaboratorsFacepile.tsx")},[]);let c=(0,s.A)(),h=d?[l(e?.owner)]:(function(e,t,i){let{collaborated_by_me:a,collaborating_users:r,owner:o}=e??{},s=r??[],n=[o];if(a||i){let e=s.findIndex(e=>t.isAuth&&e.id===t.id);if(-1!==e){let t=s.splice(e,1)[0];n.push(t)}else n.push(t)}return[...n,...[...s].sort((e,t)=>(e.full_name??"")>(t.full_name??"")?1:(t.full_name??"")>(e.full_name??"")?-1:0)]})(e,c,t).map(l);return(0,n.jsx)(o.Z7,{collaborators:h,size:i?"xs":"sm"})}},835375(e,t,i){i.d(t,{A:()=>s});var a=i(19821),r=i(538329),o=i(562615);let s=function({type:e}){let t=(0,r.A)(),i={group:{accessibilityLabel:t.bt("group board", "group board", "Board picker group board icon", undefined, true),icon:"people"},protected:{accessibilityLabel:t.bt("protected board", "protected board", "Board picker protected board icon", undefined, true),icon:"shield-check"},secret:{accessibilityLabel:t.bt("Secret board", "secret board", "Board picker secret board icon", undefined, true),icon:"lock"},sections:{accessibilityLabel:t.bt("board with sections", "board with sections", "Board picker board with sections icon", undefined, true),icon:"chevron-right"},sectionsInline:{accessibilityLabel:t.bt("board with sections", "board with sections", "Board picker board with sections icon", undefined, true),icon:"chevron-down"}}[e],s="sections"===e||"sectionsInline"===e;return(0,o.jsx)(a.az,{marginStart:+!!s,children:(0,o.jsx)(a.az,{marginStart:2*!!s,children:"sections"===e||"sectionsInline"===e?(0,o.jsx)(a.In,{accessibilityLabel:i.accessibilityLabel,color:"default",icon:i.icon,size:"12"}):(0,o.jsx)(a.In,{accessibilityLabel:i.accessibilityLabel,color:"default",icon:i.icon,size:16})})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/2968.en_GB-d3efe1ecde7336e4.mjs.map